<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anker Partner Cloud</title>
  <link rel="icon" type="image/png" href="./images/Anker Logo for web.png">

  <style>
    /* Import MontForAnker Font Family */
    @font-face {
      font-family: 'MontForAnker';
      src: url('./fonts/MontForAnker-Regular.ttf') format('truetype');
      font-weight: 400;
      font-style: normal;
    }
    @font-face {
      font-family: 'MontForAnker';
      src: url('./fonts/MontForAnker-Book.ttf') format('truetype');
      font-weight: 450;
      font-style: normal;
    }
    @font-face {
      font-family: 'MontForAnker';
      src: url('./fonts/MontForAnker-SemiBold.ttf') format('truetype');
      font-weight: 600;
      font-style: normal;
    }
    @font-face {
      font-family: 'MontForAnker';
      src: url('./fonts/MontForAnker-Bold.ttf') format('truetype');
      font-weight: 700;
      font-style: normal;
    }
    @font-face {
      font-family: 'MontForAnker';
      src: url('./fonts/MontForAnker-Heavy.ttf') format('truetype');
      font-weight: 800;
      font-style: normal;
    }

    /* Eufy Design System v0.6 - Design Tokens */
    :root {
      /* Brand Colors */
      --brand-fg-primary: #005D8E;
      --brand-fg-secondary: #007FB2;
      --brand-fill-primary: #005D8E;
      --brand-fill-secondary: #007FB2;
      --brand-fill-tertiary: #E6F4FB;

      /* Foreground Colors */
      --fg-primary: rgba(0, 0, 0, 0.90);
      --fg-secondary: rgba(0, 0, 0, 0.60);
      --fg-tertiary: rgba(0, 0, 0, 0.45);
      --fg-quaternary: rgba(0, 0, 0, 0.25);
      --fg-quinary: rgba(0, 0, 0, 0.10);

      /* Background Colors */
      --bg-primary: #F5F5F7;
      --bg-secondary: #FFFFFF;
      --bg-tertiary: #FAFAFA;

      /* Border Colors */
      --color-border-primary: rgba(0, 0, 0, 0.15);
      --color-border-secondary: rgba(0, 0, 0, 0.10);

      /* Text Colors */
      --color-text-primary: var(--fg-primary);
      --color-text-secondary: var(--fg-secondary);
      --color-text-tertiary: var(--fg-tertiary);

      /* Spacing */
      --spacing-xxs: 2px;
      --spacing-xs: 4px;
      --spacing-sm: 8px;
      --spacing-md: 12px;
      --spacing-lg: 16px;
      --spacing-xl: 20px;
      --spacing-xxl: 24px;

      /* Font Sizes */
      --font-body: 14px;
      --font-caption: 12px;
      --font-title: 16px;

      /* Font Weights */
      --font-weight-regular: 400;
      --font-weight-semibold: 600;
      --font-weight-bold: 700;
    }

    /* Global Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'MontForAnker', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      font-size: var(--font-body);
      color: var(--fg-primary);
      background-color: var(--bg-primary);
      line-height: 1.5;
    }

    /* Layout */
    .app-layout {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    /* Top Header */
    .top-header {
      background-color: var(--bg-secondary);
      border-bottom: 1px solid var(--color-border-secondary);
      padding: 0 var(--spacing-xl);
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .top-header-left {
      display: flex;
      align-items: center;
      gap: var(--spacing-lg);
    }

    .logo {
      height: 24px;
    }

    .app-title {
      font-size: var(--font-title);
      font-weight: var(--font-weight-semibold);
      color: var(--fg-primary);
    }


    .top-header-right {
      display: flex;
      align-items: center;
      gap: var(--spacing-lg);
    }

    .role-selector {
      padding: 8px 40px 8px 12px;
      border: 1px solid #2F54EB;
      border-radius: 6px;
      font-size: var(--font-body);
      color: var(--fg-primary);
      cursor: pointer;
      appearance: none !important;
      -webkit-appearance: none !important;
      -moz-appearance: none !important;
      background-color: white;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23999' d='M8 10.5L4 6.5h8z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      transition: all 0.2s;
    }

    .role-selector:hover {
      border-color: #597EF7;
    }

    .role-selector:focus {
      outline: none;
      border-color: #2F54EB;
      box-shadow: 0 0 0 2px rgba(47, 84, 235, 0.1);
    }

    .role-selector::-ms-expand {
      display: none;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, #4A90E2 0%, #6CB8FF 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      font-weight: var(--font-weight-semibold);
    }

    .user-email {
      font-size: var(--font-caption);
      color: var(--fg-secondary);
    }

    /* Main Content Area */
    .main-area {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    /* Sidebar */
    .sidebar {
      width: 240px;
      background-color: var(--bg-secondary);
      border-right: 1px solid var(--color-border-secondary);
      overflow-y: auto;
    }

    .sidebar-section {
      border-bottom: 1px solid var(--color-border-secondary);
    }

    /* Remove bottom border from last sections */
    #adminMenu,
    #companyMenu {
      border-bottom: none;
    }

    .sidebar-header {
      padding: var(--spacing-md) var(--spacing-lg);
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      color: var(--fg-primary);
      font-weight: var(--font-weight-regular);
    }

    .sidebar-header > span:first-child {
      display: flex;
      align-items: center;
    }

    .sidebar-header:hover {
      background-color: var(--bg-primary);
    }

    .sidebar-header.active {
      background-color: var(--brand-fill-tertiary);
      color: var(--brand-fg-primary);
    }

    /* Expandable sidebar headers (with dropdown arrow) should not show active background */
    .sidebar-header-expandable.active {
      background-color: transparent;
    }

    .sidebar-icon {
      width: 16px;
      height: 16px;
      margin-right: var(--spacing-sm);
      vertical-align: middle;
    }

    .sidebar-menu {
      display: none;
    }

    .sidebar-menu.expanded {
      display: block;
    }

    .sidebar-menu-item {
      padding: var(--spacing-sm) var(--spacing-lg) var(--spacing-sm) 48px;
      cursor: pointer;
      color: var(--fg-secondary);
    }

    .sidebar-menu-item:hover {
      background-color: var(--bg-primary);
    }

    .sidebar-menu-item.active {
      background-color: var(--brand-fill-tertiary);
      color: var(--brand-fg-primary);
      font-weight: var(--font-weight-regular);
    }

    /* Content Area */
    .content-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      overflow-y: auto;
      padding: var(--spacing-xl);
    }

    /* Search Section */
    .search-section {
      background-color: var(--bg-secondary);
      padding: var(--spacing-lg);
      border-radius: 8px;
      margin-bottom: var(--spacing-lg);
      display: flex;
      align-items: center;
      gap: var(--spacing-lg);
    }

    .search-label {
      font-weight: normal;
      white-space: nowrap;
    }

    .search-input {
      flex: 1;
      max-width: 400px;
      padding: 8px 12px;
      border: 1px solid var(--color-border-primary);
      border-radius: 4px;
      font-size: var(--font-body);
      height: 38px;
      box-sizing: border-box;
    }

    .search-input::placeholder {
      color: var(--fg-tertiary);
    }

    .btn {
      padding: 8px 20px;
      border: none;
      border-radius: 4px;
      font-size: var(--font-body);
      font-weight: var(--font-weight-regular);
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background-color: var(--brand-fill-primary);
      color: white;
    }

    .btn-primary:hover {
      background-color: #004A73;
    }

    .btn-secondary {
      background-color: var(--bg-tertiary);
      color: var(--fg-primary);
      border: 1px solid var(--color-border-primary);
    }

    .btn-secondary:hover {
      background-color: var(--bg-primary);
    }

    /* List Section */
    .list-section {
      background-color: var(--bg-secondary);
      border-radius: 8px;
      padding: var(--spacing-lg);
    }

    .list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-lg);
    }

    .list-title {
      font-size: 18px;
      font-weight: var(--font-weight-bold);
      color: var(--fg-primary);
    }

    .list-actions {
      display: flex;
      gap: var(--spacing-sm);
    }

    .icon-btn {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid var(--color-border-primary);
      border-radius: 4px;
      background-color: var(--bg-secondary);
      cursor: pointer;
      transition: all 0.2s;
    }

    .icon-btn:hover {
      background-color: var(--bg-primary);
    }

    /* Table */
    .table-wrapper {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th {
      text-align: left;
      padding: var(--spacing-md);
      background-color: var(--bg-tertiary);
      color: var(--fg-primary);
      font-weight: var(--font-weight-semibold);
      border-bottom: 1px solid var(--color-border-secondary);
    }

    td {
      padding: var(--spacing-md);
      border-bottom: 1px solid var(--color-border-secondary);
      color: var(--fg-primary);
    }

    tr:hover {
      background-color: var(--bg-tertiary);
    }

    .action-link {
      color: var(--brand-fg-primary);
      cursor: pointer;
      text-decoration: none;
      margin: 0 var(--spacing-sm);
    }

    .action-link:hover {
      text-decoration: underline;
    }

    .action-link.delete {
      color: #FF3B30;
    }

    .action-link.review {
      color: #1890FF;
      font-weight: 500;
    }

    .action-link.details {
      color: #8C8C8C;
    }

    /* Table Styles */
    .table-wrapper {
      overflow-x: auto;
      width: 100%;
    }

    table {
      width: 100%;
      min-width: max-content;
    }

    th, td {
      padding: 12px 16px;
    }

    /* Table headers always display in single line without truncation */
    th {
      white-space: nowrap;
    }

    /* Only apply truncation to text columns that may be long */
    td.truncate {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 200px;
    }

    /* Table cell tooltip on hover - only show help cursor when text is truncated */
    td.truncate[title]:hover {
      cursor: help;
    }

    /* Pagination */
    .pagination {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: var(--spacing-lg);
      padding-top: var(--spacing-lg);
      border-top: 1px solid var(--color-border-secondary);
    }

    .pagination-info {
      color: var(--fg-secondary);
      font-size: var(--font-caption);
    }

    .pagination-controls {
      display: flex;
      gap: var(--spacing-sm);
      align-items: center;
    }

    .pagination-btn {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid var(--color-border-primary);
      border-radius: 4px;
      background-color: var(--bg-secondary);
      cursor: pointer;
    }

    .pagination-btn:hover {
      background-color: var(--bg-primary);
    }

    .pagination-btn.active {
      background-color: var(--brand-fill-primary);
      color: white;
      border-color: var(--brand-fill-primary);
    }

    .page-size-selector {
      padding: 6px 32px 6px 10px;
      border: 1px solid var(--color-border-primary);
      border-radius: 4px;
      font-size: var(--font-caption);
      cursor: pointer;
      appearance: none !important;
      -webkit-appearance: none !important;
      -moz-appearance: none !important;
      background-color: white;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 14 14'%3E%3Cpath fill='%23999' d='M7 9L3.5 5.5h7z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 8px center;
      transition: all 0.2s;
    }

    .page-size-selector:hover {
      border-color: #597EF7;
    }

    .page-size-selector::-ms-expand {
      display: none;
    }

    /* Footer */
    .footer {
      background-color: var(--bg-secondary);
      border-top: 1px solid var(--color-border-secondary);
      padding: var(--spacing-lg);
      text-align: center;
      color: var(--fg-tertiary);
      font-size: var(--font-caption);
    }

    /* Drawer */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
    }

    .modal-overlay.active {
      display: block;
    }

    .modal {
      position: fixed;
      top: 0;
      right: -100%;
      width: 90%;
      max-width: 1200px;
      height: 100vh;
      background-color: var(--bg-secondary);
      display: flex;
      flex-direction: column;
      box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
      transition: right 0.3s ease-in-out;
    }

    .modal-overlay.active .modal {
      right: 0;
    }

    /* Confirmation Modal - Centered */
    .modal-overlay.confirm.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-overlay.confirm .modal {
      position: relative;
      top: auto;
      right: auto;
      width: auto;
      height: auto;
      max-width: 480px;
      border-radius: 8px;
      transition: none;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--spacing-lg) var(--spacing-xl);
      border-bottom: 1px solid var(--color-border-secondary);
    }

    .modal-title {
      font-size: 18px;
      font-weight: var(--font-weight-semibold);
      color: var(--fg-primary);
    }

    .modal-close {
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--fg-secondary);
      font-size: 20px;
    }

    .modal-close:hover {
      color: var(--fg-primary);
    }

    .modal-body {
      flex: 1;
      overflow-y: hidden;
      padding: var(--spacing-xl);
      display: flex;
      gap: var(--spacing-xxl);
    }

    .modal-left {
      flex: 1;
      min-width: 300px;
    }

    .modal-right {
      flex: 1;
      min-width: 400px;
      display: flex;
      flex-direction: column;
    }

    .form-group {
      margin-bottom: var(--spacing-md);
    }

    .form-label {
      display: block;
      margin-bottom: var(--spacing-sm);
      color: var(--fg-primary);
      font-size: var(--font-body);
    }

    .form-label.required::before {
      content: "* ";
      color: #FF3B30;
    }

    .form-input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid var(--color-border-primary);
      border-radius: 4px;
      font-size: var(--font-body);
      font-family: inherit;
    }

    .form-input::placeholder {
      color: var(--fg-tertiary);
    }

    .form-input:focus {
      outline: none;
      border-color: var(--brand-fg-primary);
    }

    select.form-input {
      padding: 8px 40px 8px 12px;
      cursor: pointer;
      appearance: none !important;
      -webkit-appearance: none !important;
      -moz-appearance: none !important;
      background-color: white;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23999' d='M8 10.5L4 6.5h8z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      transition: all 0.2s;
    }

    select.form-input:hover {
      border-color: var(--brand-fg-primary);
    }

    select.form-input::-ms-expand {
      display: none;
    }

    .form-textarea {
      width: 100%;
      min-height: 80px;
      padding: 8px 12px;
      border: 1px solid var(--color-border-primary);
      border-radius: 4px;
      font-size: var(--font-body);
      font-family: inherit;
      resize: vertical;
    }

    .form-textarea::placeholder {
      color: var(--fg-tertiary);
    }

    .form-textarea:focus {
      outline: none;
      border-color: var(--brand-fg-primary);
    }

    .char-count {
      text-align: right;
      margin-top: 4px;
      color: var(--fg-tertiary);
      font-size: var(--font-caption);
    }

    .permission-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-md);
      flex-shrink: 0;
    }

    .permission-title {
      font-size: var(--font-title);
      font-weight: var(--font-weight-semibold);
      color: var(--fg-primary);
    }

    .permission-count {
      color: var(--fg-tertiary);
      font-size: var(--font-caption);
    }

    .permission-tree {
      border: 1px solid var(--color-border-secondary);
      border-radius: 4px;
      padding: var(--spacing-md);
      flex: 1;
      overflow-y: auto;
    }

    .tree-item {
      margin-bottom: var(--spacing-xs);
    }

    .tree-node {
      display: flex;
      align-items: center;
      padding: 4px 0;
      cursor: pointer;
    }

    .tree-node:hover {
      background-color: var(--bg-tertiary);
    }

    .tree-toggle {
      width: 16px;
      height: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: var(--spacing-xs);
      color: var(--fg-secondary);
      cursor: pointer;
    }

    .tree-toggle.empty {
      visibility: hidden;
    }

    .tree-checkbox {
      margin-right: var(--spacing-sm);
      cursor: pointer;
    }

    .tree-label {
      font-size: var(--font-body);
      color: var(--fg-primary);
      user-select: none;
    }

    .tree-label.button-label {
      color: var(--fg-tertiary);
    }

    .tree-children {
      display: none;
      margin-left: var(--spacing-xl);
    }

    .tree-children.expanded {
      display: block;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: var(--spacing-md);
      padding: var(--spacing-lg) var(--spacing-xl);
      border-top: 1px solid var(--color-border-secondary);
    }

    .select-all-wrapper {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      margin-bottom: var(--spacing-md);
      flex-shrink: 0;
    }

    .select-all-label {
      color: var(--brand-fg-primary);
      cursor: pointer;
      user-select: none;
    }

    /* Custom Dropdown */
    .custom-select {
      position: relative;
      display: inline-block;
    }

    .custom-select-trigger {
      padding: 8px 40px 8px 12px;
      border: 1px solid var(--color-border-primary);
      border-radius: 4px;
      font-size: var(--font-body);
      color: var(--fg-primary);
      cursor: pointer;
      background-color: white;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23999' d='M8 10.5L4 6.5h8z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      transition: all 0.2s;
      user-select: none;
      white-space: nowrap;
      height: 38px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
    }

    .custom-select-trigger:hover {
      border-color: var(--brand-fg-primary);
    }

    .custom-select.open .custom-select-trigger {
      border-color: var(--brand-fg-primary);
      box-shadow: 0 0 0 2px rgba(47, 84, 235, 0.1);
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23999' d='M8 5.5L4 9.5h8z'/%3E%3C/svg%3E");
    }

    /* Role selector styling */
    #roleSelector .custom-select-trigger {
      border-radius: 6px;
    }

    .custom-select-dropdown {
      position: absolute;
      top: calc(100% + 4px);
      left: 0;
      right: 0;
      background: white;
      border: 1px solid var(--color-border-primary);
      border-radius: 6px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      max-height: 240px;
      overflow-y: auto;
      z-index: 1000;
      display: none;
    }

    /* Dropdown opens upward when near bottom */
    .custom-select.open-upward .custom-select-dropdown {
      top: auto;
      bottom: calc(100% + 4px);
    }

    .custom-select.open .custom-select-dropdown {
      display: block;
    }

    .custom-select-option {
      padding: 10px 16px;
      cursor: pointer;
      transition: all 0.15s;
      font-size: var(--font-body);
      color: var(--fg-primary);
    }

    .custom-select-option:hover {
      background-color: #F5F7FA;
    }

    .custom-select-option.selected {
      background-color: #E6F0FF;
      color: #2F54EB;
      font-weight: var(--font-weight-semibold);
    }

    .custom-select-option.selected::after {
      content: '✓';
      float: right;
      color: #2F54EB;
      font-weight: bold;
    }

    /* Multi-select dropdown styles */
    .custom-select.multi-select .custom-select-option {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
    }

    .custom-select.multi-select .custom-select-option input[type="checkbox"] {
      width: 16px;
      height: 16px;
      cursor: pointer;
    }

    .custom-select.multi-select .custom-select-option.selected {
      background-color: transparent;
      color: var(--fg-primary);
      font-weight: normal;
    }

    .custom-select.multi-select .custom-select-option.selected::after {
      display: none;
    }

    .custom-select.multi-select .custom-select-option:hover {
      background-color: #F5F7FA;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%) translateY(-20px);
      background-color: var(--bg-secondary);
      padding: var(--spacing-lg) var(--spacing-xl);
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
      z-index: 2000;
      opacity: 0;
      pointer-events: none;
      transition: all 0.3s ease-in-out;
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .toast-icon {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }

    .toast-message {
      color: var(--fg-primary);
      font-size: var(--font-body);
    }

    .toast.success .toast-icon {
      color: #34C759;
    }

    .toast.error .toast-icon {
      color: #FF3B30;
    }

    .toast.info .toast-icon {
      color: var(--brand-fg-primary);
    }
  </style>
</head>
<body>
  <div class="app-layout">
    <!-- Top Header -->
    <div class="top-header">
      <div class="top-header-left">
        <img src="./images/Anker Logo New.png" alt="ANKER Innovations" class="logo">
        <span class="app-title">Anker Partner Cloud</span>
      </div>
      <div class="top-header-right">
        <div class="custom-select" id="roleSelector">
          <div class="custom-select-trigger">Administrator</div>
          <div class="custom-select-dropdown">
            <div class="custom-select-option selected" data-value="Administrator">Administrator</div>
            <div class="custom-select-option" data-value="Company A">Company A</div>
            <div class="custom-select-option" data-value="Company B">Company B</div>
          </div>
        </div>
        <div class="user-info">
          <div class="user-avatar">
            <svg viewBox="0 0 1024 1024" width="32" height="32">
              <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#80AFFF"></path>
              <path d="M493.226667 1023.431111V0.568889C499.484444 0 505.742222 0 512 0c282.737778 0 512 229.262222 512 512s-229.262222 512-512 512c-6.257778 0-12.515556 0-18.773333-0.568889z" fill="#6EA3FF"></path>
              <path d="M150.186667 874.382222c69.404444-149.048889 207.644444-250.88 366.364444-250.88 156.444444 0 292.977778 98.417778 363.52 244.053334-93.297778 96.711111-223.573333 156.444444-368.071111 156.444444-141.084444 0-269.084444-57.457778-361.813333-149.617778z" fill="#D1E1FF"></path>
              <path d="M497.777778 423.822222m-172.373334 0a172.373333 172.373333 0 1 0 344.746667 0 172.373333 172.373333 0 1 0-344.746667 0Z" fill="#DAE7FF"></path>
              <path d="M494.933333 595.626667V251.448889h2.844445c95.004444 0 172.373333 77.368889 172.373333 172.373333s-77.368889 172.373333-172.373333 172.373334c-0.568889-0.568889-1.706667-0.568889-2.844445-0.568889z" fill="#C1D8FF"></path>
              <path d="M489.244444 1024v-399.36c7.395556-0.568889 14.222222-0.568889 21.617778-0.568889 156.444444 0 292.977778 98.417778 363.52 244.053333C781.084444 964.266667 650.808889 1024 506.311111 1024h-17.066667z" fill="#C1D8FF"></path>
            </svg>
          </div>
          <span class="user-email">installer@example.com</span>
        </div>
      </div>
    </div>

    <!-- Main Area -->
    <div class="main-area">
      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Administrator Menu -->
        <div id="adminMenu" class="sidebar-section">
          <div class="sidebar-header sidebar-header-expandable active" onclick="toggleSection(this)">
            <span>
              <svg class="sidebar-icon" viewBox="0 0 1024 1024" fill="currentColor">
                <path d="M928 832 896 832 896 384c0-70.4-57.6-128-128-128L576 256 576 192c0-70.4-57.6-128-128-128L192 64C121.6 64 64 121.6 64 192l0 640L32 832C14.08 832 0 846.08 0 864 0 881.92 14.08 896 32 896l896 0c17.92 0 32-14.08 32-32C960 846.08 945.92 832 928 832zM512 256l0 64 0 512L128 832 128 192c0-35.2 28.8-64 64-64l256 0c35.2 0 64 28.8 64 64L512 256zM832 832 576 832 576 320l192 0c35.2 0 64 28.8 64 64L832 832zM416 256l-192 0C206.08 256 192 270.08 192 288 192 305.92 206.08 320 224 320l192 0C433.92 320 448 305.92 448 288 448 270.08 433.92 256 416 256zM416 448l-192 0C206.08 448 192 462.08 192 480 192 497.92 206.08 512 224 512l192 0C433.92 512 448 497.92 448 480 448 462.08 433.92 448 416 448zM416 640l-192 0C206.08 640 192 654.08 192 672S206.08 704 224 704l192 0C433.92 704 448 689.92 448 672S433.92 640 416 640zM736 448l-64 0C654.08 448 640 462.08 640 480 640 497.92 654.08 512 672 512l64 0C753.92 512 768 497.92 768 480 768 462.08 753.92 448 736 448zM736 640l-64 0c-17.92 0-32 14.08-32 32s14.08 32 32 32l64 0c17.92 0 32-14.08 32-32S753.92 640 736 640z"/>
              </svg>
              Tenant
            </span>
            <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 1024 1024" fill="currentColor" style="transform: rotate(180deg); transition: transform 0.2s;">
              <path d="M151.4 384.7L476.6 710c19.5 19.5 51.2 19.5 70.7 0l325.3-325.3c19.5-19.5 19.5-51.2 0-70.7s-51.2-19.5-70.7 0L512 603.9 222.1 314c-19.5-19.5-51.2-19.5-70.7 0-19.6 19.5-19.6 51.2 0 70.7z"/>
            </svg>
          </div>
          <div class="sidebar-menu expanded">
            <div class="sidebar-menu-item active" onclick="showCompanyPage()">Company</div>
            <div class="sidebar-menu-item" onclick="showApprovalPage()">Approval</div>
          </div>
        </div>

        <!-- Company Menu -->
        <div id="companyMenu" class="sidebar-section" style="display: none;">
          <div class="sidebar-header" onclick="showUserPage(event)">
            <span>
              <svg class="sidebar-icon" viewBox="0 0 1118 1024" fill="currentColor">
                <path d="M639.252 221.147c-33.039-92.704-117.58-158.869-216.288-158.869-127.357 0-229.556 110.145-229.556 243.655 0 83.443 39.308 156.875 99.055 200.265C157.246 562.939 62.907 701.457 62.907 863.337h64.464c0-160.212 114.778-293.722 261.003-312.08 1.572 0 40.88-3.338 73.898 0h3.144a280.135 280.135 0 0 1 55.641 14.405c-14.403-27.794-23.846-58.972-27.043-92.164-21.647 10.294-45.689 16.011-71.05 16.011-95.911 0-172.954-81.775-172.954-183.577 0-101.801 77.043-183.577 172.954-183.577 77.79 0 143.167 53.794 165.096 128.437 15.68-12.056 32.858-22.067 51.193-29.647zM814.127 606.47c59.747-43.39 99.055-116.822 99.055-200.265 0-135.178-103.773-245.325-231.128-245.325-127.357 0-229.556 110.145-229.556 243.655 0 83.443 39.307 156.874 99.055 200.265-135.218 56.741-229.556 195.259-229.556 357.139h64.464c0-160.212 114.778-293.722 261.003-312.08 1.572 0 40.88-3.338 73.898 0h3.144c143.079 21.696 253.141 151.868 253.141 310.41h66.037c-1.572-160.212-95.911-298.729-229.556-353.801z m-132.073-18.357c-95.911 0-172.954-81.775-172.954-183.577s77.043-183.577 172.954-183.577 172.954 81.775 172.954 183.577c0 101.801-77.043 183.577-172.954 183.577z" fill="currentColor"/>
              </svg>
              User
            </span>
          </div>
          <div class="sidebar-header active" onclick="showDevicePage(event)">
            <span>
              <svg class="sidebar-icon" viewBox="0 0 1024 1024" fill="currentColor">
                <path d="M954.066 439.7a181.176 181.176 0 0 1-49.844 64.146 25.936 25.936 0 0 1 5.917 30.043l-87.854 188.377a25.985 25.985 0 0 1-34.531 12.566l-74.657-34.81a77.974 77.974 0 0 1-88.605 16.023l-149.2-69.564-50.517 101.011a77.534 77.534 0 0 1-69.729 43.083H223.391v25.982a78.036 78.036 0 0 1-77.952 77.943h-51.97a25.982 25.982 0 0 1-25.984-25.98V608.707a25.983 25.983 0 0 1 25.983-25.982h51.969a78.076 78.076 0 0 1 73.485 51.964h87.941l27.067-54.118L200.593 518.4c-64.927-30.273-93.118-107.718-62.841-172.637l65.89-141.284c30.277-64.919 107.731-93.1 172.655-62.835l565.2 263.523a25.985 25.985 0 0 1 12.569 34.533zM145.439 634.687h-25.985v207.85h25.983a26.012 26.012 0 0 0 25.985-25.982V660.669a26.012 26.012 0 0 0-25.983-25.982z m640.727 42.071l65.894-141.282-2.421-1.127a182 182 0 0 1-59.26 10.429L739.067 654.8z m-463.246 9.89h-99.529v51.962h131.655a25.845 25.845 0 0 0 23.246-14.36l49.884-99.742-47.128-21.973-34.887 69.752a25.984 25.984 0 0 1-23.241 14.361zM217.795 297.083l-32.944 70.641a78.03 78.03 0 0 0 37.7 103.581L646.455 668.95a25.972 25.972 0 0 0 34.53-12.566l55.683-119.4a184.083 184.083 0 0 1-24.326-9.311z m136.539-108.344a78.041 78.041 0 0 0-103.593 37.7l-10.981 23.548 494.544 230.584a130.038 130.038 0 0 0 159.336-40.378z m266.985 411.155l-94.2-43.921a25.982 25.982 0 1 1 21.966-47.094l94.2 43.921a25.982 25.982 0 1 1-21.966 47.094z m-271.626-129.32a25.982 25.982 0 1 1 25.984-25.981 25.983 25.983 0 0 1-25.984 25.981z m-94.184-43.926a25.982 25.982 0 1 1 25.984-25.982 25.984 25.984 0 0 1-25.984 25.982z" fill="currentColor"/>
              </svg>
              Device
            </span>
          </div>
        </div>
      </div>

      <!-- Content Area -->
      <div class="content-area">
        <!-- Company Content -->
        <div id="companyContent" class="main-content">
          <!-- Search Section -->
          <div class="search-section">
            <div style="display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 16px 24px; align-items: center; width: 100%;">
              <!-- Field 1: Company Name -->
              <div style="display: flex; align-items: center; gap: 8px; min-width: 0;">
                <label class="search-label" style="white-space: nowrap; margin: 0; flex-shrink: 0;">Company Name:</label>
                <input type="text" class="search-input" placeholder="Please enter" style="flex: 1; min-width: 0; width: 100%;">
              </div>
              <!-- Empty cells -->
              <div></div>
              <!-- Buttons -->
              <div style="display: flex; gap: 12px; justify-content: flex-end; align-items: center;">
                <button class="btn btn-primary">Search</button>
                <button class="btn btn-secondary">Reset</button>
              </div>
            </div>
          </div>

          <!-- List Section -->
          <div class="list-section">
            <div class="list-header">
              <h2 class="list-title">Company List</h2>
              <div class="list-actions">
                <button class="btn btn-primary" onclick="openCreateModal()">Create</button>
              </div>
            </div>

            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>Company Name</th>
                    <th>Account Quantity</th>
                    <th>Company Description</th>
                    <th>Business Type</th>
                    <th>Create Time</th>
                    <th>Operate</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td class="truncate">TechVision Solutions</td>
                    <td>8</td>
                    <td class="truncate">Energy management system integrator.</td>
                    <td>Installer</td>
                    <td>2025-12-16 18:26:00</td>
                    <td>
                      <a class="action-link" onclick="editCompany('TechVision Solutions')">Edit</a>
                      <a class="action-link delete" onclick="deleteCompany('TechVision Solutions')">Delete</a>
                      <a class="action-link" onclick="viewApplication('TechVision Solutions')">Application</a>
                    </td>
                  </tr>
                  <tr><td class="truncate">GreenPower Systems</td>
                    <td>12</td>
                    <td class="truncate">Renewable energy solutions provider.</td>
                    <td>Installer (SaaS)</td>
                    <td>2025-11-28 14:32:15</td>
                    <td>
                      <a class="action-link" onclick="editCompany('GreenPower Systems')">Edit</a>
                      <a class="action-link delete" onclick="deleteCompany('GreenPower Systems')">Delete</a>
                      <a class="action-link" onclick="viewApplication('GreenPower Systems')">Application</a>
                    </td>
                  </tr>
                  <tr><td class="truncate">SmartHome Technologies</td>
                    <td>6</td>
                    <td class="truncate">Home automation and IoT integration.</td>
                    <td>Others</td>
                    <td>2025-11-17 16:16:32</td>
                    <td>
                      <a class="action-link" onclick="editCompany('SmartHome Technologies')">Edit</a>
                      <a class="action-link delete" onclick="deleteCompany('SmartHome Technologies')">Delete</a>
                      <a class="action-link" onclick="viewApplication('SmartHome Technologies')">Application</a>
                    </td>
                  </tr>
                  <tr><td class="truncate">EcoCharge Networks</td>
                    <td>15</td>
                    <td class="truncate">Electric vehicle charging infrastructure.</td>
                    <td>Installer</td>
                    <td>2025-11-05 10:22:48</td>
                    <td>
                      <a class="action-link" onclick="editCompany('EcoCharge Networks')">Edit</a>
                      <a class="action-link delete" onclick="deleteCompany('EcoCharge Networks')">Delete</a>
                      <a class="action-link" onclick="viewApplication('EcoCharge Networks')">Application</a>
                    </td>
                  </tr>
                  <tr><td class="truncate">PowerGrid Innovations</td>
                    <td>9</td>
                    <td class="truncate">Smart grid and energy storage solutions.</td>
                    <td>Installer (SaaS)</td>
                    <td>2025-10-29 11:17:22</td>
                    <td>
                      <a class="action-link" onclick="editCompany('PowerGrid Innovations')">Edit</a>
                      <a class="action-link delete" onclick="deleteCompany('PowerGrid Innovations')">Delete</a>
                      <a class="action-link" onclick="viewApplication('PowerGrid Innovations')">Application</a>
                    </td>
                  </tr>
                  <tr><td class="truncate">SolarTech Industries</td>
                    <td>11</td>
                    <td class="truncate">Solar panel installation and maintenance.</td>
                    <td>Installer</td>
                    <td>2025-10-15 09:45:33</td>
                    <td>
                      <a class="action-link" onclick="editCompany('SolarTech Industries')">Edit</a>
                      <a class="action-link delete" onclick="deleteCompany('SolarTech Industries')">Delete</a>
                      <a class="action-link" onclick="viewApplication('SolarTech Industries')">Application</a>
                    </td>
                  </tr>
                  <tr><td class="truncate">EnergyHub Corporation</td>
                    <td>7</td>
                    <td class="truncate">Energy monitoring and analytics platform.</td>
                    <td>Others</td>
                    <td>2025-09-28 15:20:11</td>
                    <td>
                      <a class="action-link" onclick="editCompany('EnergyHub Corporation')">Edit</a>
                      <a class="action-link delete" onclick="deleteCompany('EnergyHub Corporation')">Delete</a>
                      <a class="action-link" onclick="viewApplication('EnergyHub Corporation')">Application</a>
                    </td>
                  </tr>
                  <tr><td class="truncate">NextGen Power Solutions</td>
                    <td>14</td>
                    <td class="truncate">Battery storage system integrator.</td>
                    <td>Installer (SaaS)</td>
                    <td>2025-09-12 13:38:47</td>
                    <td>
                      <a class="action-link" onclick="editCompany('NextGen Power Solutions')">Edit</a>
                      <a class="action-link delete" onclick="deleteCompany('NextGen Power Solutions')">Delete</a>
                      <a class="action-link" onclick="viewApplication('NextGen Power Solutions')">Application</a>
                    </td>
                  </tr>
                  <tr><td class="truncate">CleanEnergy Partners</td>
                    <td>10</td>
                    <td class="truncate">Sustainable energy consulting services.</td>
                    <td>Others</td>
                    <td>2025-08-30 11:05:29</td>
                    <td>
                      <a class="action-link" onclick="editCompany('CleanEnergy Partners')">Edit</a>
                      <a class="action-link delete" onclick="deleteCompany('CleanEnergy Partners')">Delete</a>
                      <a class="action-link" onclick="viewApplication('CleanEnergy Partners')">Application</a>
                    </td>
                  </tr>
                  <tr><td class="truncate">FutureGrid Systems</td>
                    <td>13</td>
                    <td class="truncate">Advanced metering infrastructure provider.</td>
                    <td>Installer</td>
                    <td>2025-08-22 17:10:32</td>
                    <td>
                      <a class="action-link" onclick="editCompany('FutureGrid Systems')">Edit</a>
                      <a class="action-link delete" onclick="deleteCompany('FutureGrid Systems')">Delete</a>
                      <a class="action-link" onclick="viewApplication('FutureGrid Systems')">Application</a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="pagination">
              <div class="pagination-info">1-10 of 10 items</div>
              <div class="pagination-controls">
                <button class="pagination-btn">‹</button>
                <button class="pagination-btn active">1</button>
                <button class="pagination-btn">›</button>
                <div class="custom-select page-size-select">
                  <div class="custom-select-trigger" style="font-size: var(--font-caption); padding: 6px 32px 6px 10px;">10 / page</div>
                  <div class="custom-select-dropdown">
                    <div class="custom-select-option selected" data-value="10 / page">10 / page</div>
                    <div class="custom-select-option" data-value="20 / page">20 / page</div>
                    <div class="custom-select-option" data-value="50 / page">50 / page</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Device Content -->
        <!-- User Content (for Company A/B) -->
        <div id="userContent" class="main-content" style="display: none;">
          <!-- Search Section -->
          <div class="search-section">
            <div id="userSearchGrid" style="display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 16px 24px; align-items: center; width: 100%;">
              <!-- Field 1: User ID -->
              <div style="display: flex; align-items: center; gap: 8px; min-width: 0;">
                <label class="search-label" style="white-space: nowrap; margin: 0; flex-shrink: 0;">User ID:</label>
                <input type="text" class="search-input" placeholder="Please enter" style="flex: 1; min-width: 0; width: 100%;">
              </div>
              <!-- Field 2: Account -->
              <div style="display: flex; align-items: center; gap: 8px; min-width: 0;">
                <label class="search-label" style="white-space: nowrap; margin: 0; flex-shrink: 0;">Account:</label>
                <input type="text" class="search-input" placeholder="Please enter" style="flex: 1; min-width: 0; width: 100%;">
              </div>
              <!-- Buttons - Default Position (Row 1, Column 3) -->
              <div id="userButtonsCollapsed" style="display: flex; gap: 12px; justify-content: flex-end; align-items: center;">
                <button class="btn btn-primary">Search</button>
                <button class="btn btn-secondary">Reset</button>
                <a id="userExpandToggle" href="javascript:void(0)" onclick="toggleUserSearchExpand()" style="color: var(--brand-fg-primary); text-decoration: none; line-height: 1;">Expand</a>
              </div>
              <!-- Field 3: Nick Name (Hidden by default, will be in Row 1 Column 3 when expanded) -->
              <div id="userField3" style="display: none; align-items: center; gap: 8px; min-width: 0;">
                <label class="search-label" style="white-space: nowrap; margin: 0; flex-shrink: 0;">Nick Name:</label>
                <input type="text" class="search-input" placeholder="Please enter" style="flex: 1; min-width: 0; width: 100%;">
              </div>
              <!-- Empty cells for Row 2 Column 1 and 2 -->
              <div id="userEmptyCell1" style="display: none;"></div>
              <div id="userEmptyCell2" style="display: none;"></div>
              <!-- Buttons - Expanded Position (Row 2, Column 3) -->
              <div id="userButtonsExpanded" style="display: none; gap: 12px; justify-content: flex-end; align-items: center;">
                <button class="btn btn-primary">Search</button>
                <button class="btn btn-secondary">Reset</button>
                <a href="javascript:void(0)" onclick="toggleUserSearchExpand()" style="color: var(--brand-fg-primary); text-decoration: none; line-height: 1;">Pack Up</a>
              </div>
            </div>
          </div>

          <!-- User List Section -->
          <div class="list-section">
            <div class="list-header">
              <h2 class="list-title">User List</h2>
            </div>

            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>User ID</th>
                    <th>Account</th>
                    <th>Nick Name</th>
                    <th>Country</th>
                    <th>City</th>
                    <th>Device</th>
                    <th>Service</th>
                    <th>Status</th>
                    <th>Company</th>
                    <th>Create Time</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td>742f8cfdf0786d1e6763b1c5e69f7dbe934aef18</td><td style="color: var(--brand-fg-primary);">nicole@example.com</td><td>Nicole Zhang</td><td>CN</td><td>-</td><td>25</td><td>1</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Valid
                      </span>
                    </td><td class="truncate">Company A</td><td>2023-11-29 11:36:49</td></tr>
                  <tr><td>8a9d4be2c3f1e7a56042d8f9c6e3b1a2f5d7e8c4</td><td style="color: var(--brand-fg-primary);">john.smith@example.com</td><td>John Smith</td><td>US</td><td>New York</td><td>42</td><td>2</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Valid
                      </span>
                    </td><td class="truncate">Company A, Company B</td><td>2024-02-15 09:22:31</td></tr>
                  <tr><td>f3e9c2a1b8d7f4e5c6a9d2b1e8f7c3a4d5e6f9b2</td><td style="color: var(--brand-fg-primary);">mike.johnson@example.com</td><td>Mike Johnson</td><td>GB</td><td>London</td><td>18</td><td>1</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #FF4D4F; border-radius: 50%;"></span>
                        Invalid
                      </span>
                    </td><td class="truncate">Company B</td><td>2024-05-08 16:45:12</td></tr>
                  <tr><td>c5d2e8f1a4b9c6d3e7f2a8b5c1d4e9f3a6b7c8d2</td><td style="color: var(--brand-fg-primary);">sarah.wilson@example.com</td><td>Sarah Wilson</td><td>DE</td><td>Berlin</td><td>33</td><td>3</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Valid
                      </span>
                    </td><td class="truncate">Company A, Company C</td><td>2024-08-20 14:18:27</td></tr>
                  <tr><td>a7b8c9d1e2f3a4b5c6d7e8f9a1b2c3d4e5f6a7b8</td><td style="color: var(--brand-fg-primary);">robert.brown@example.com</td><td>Robert Brown</td><td>AU</td><td>Sydney</td><td>56</td><td>4</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Valid
                      </span>
                    </td><td class="truncate">Company B, Company C</td><td>2024-10-03 08:51:44</td></tr>
                </tbody>
              </table>
            </div>

            <!-- Pagination -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 16px; padding: 0 8px;">
              <div style="color: var(--fg-secondary); font-size: var(--font-body);">
                1-5 of 5 items
              </div>
              <div style="display: flex; align-items: center; gap: 8px;">
                <button class="btn btn-secondary" style="min-width: 32px; padding: 4px 8px;" disabled>&lt;</button>
                <button class="btn btn-primary" style="min-width: 32px; padding: 4px 8px;">1</button>
                <button class="btn btn-secondary" style="min-width: 32px; padding: 4px 8px;" disabled>&gt;</button>
                <div class="custom-select" style="width: 100px; margin-left: 8px;">
                  <div class="custom-select-trigger">10 / page</div>
                  <div class="custom-select-dropdown">
                    <div class="custom-select-option selected" data-value="10">10 / page</div>
                    <div class="custom-select-option" data-value="20">20 / page</div>
                    <div class="custom-select-option" data-value="50">50 / page</div>
                    <div class="custom-select-option" data-value="100">100 / page</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="deviceContent" class="main-content" style="display: none;">
          <!-- Search Section -->
          <div class="search-section">
            <div style="display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 16px 24px; align-items: center; width: 100%;">
              <!-- Field 1: Device SN -->
              <div style="display: flex; align-items: center; gap: 8px; min-width: 0;">
                <label class="search-label" style="white-space: nowrap; margin: 0; flex-shrink: 0;">Device SN:</label>
                <input type="text" class="search-input" placeholder="Please enter" style="flex: 1; min-width: 0; width: 100%;">
              </div>
              <!-- Field 2: Account -->
              <div style="display: flex; align-items: center; gap: 8px; min-width: 0;">
                <label class="search-label" style="white-space: nowrap; margin: 0; flex-shrink: 0;">Account:</label>
                <input type="text" class="search-input" placeholder="Please enter" style="flex: 1; min-width: 0; width: 100%;">
              </div>
              <!-- Buttons -->
              <div style="display: flex; gap: 12px; justify-content: flex-end; align-items: center;">
                <button class="btn btn-primary">Search</button>
                <button class="btn btn-secondary">Reset</button>
              </div>
            </div>
          </div>

          <!-- Device List Section -->
          <div class="list-section">
            <div class="list-header">
              <h2 class="list-title">Device List</h2>
            </div>

            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>Device SN</th>
                    <th>Device Name</th>
                    <th>Account</th>
                    <th>Firmware Version</th>
                    <th>Hardware Version</th>
                    <th>Status</th>
                    <th>Create Time</th>
                    <th>Bind Time</th>
                    <th>Update Time</th>
                    <th>Company</th>
                    <th>Operate</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td>T8124P40233A001B</td><td>T8124P40233A001B</td><td style="color: var(--brand-fg-primary);">user@example.com</td><td>3.2.6.0</td><td>0.0.0.0</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Online
                      </span>
                    </td><td>2023-10-12 10:29:09</td><td>2025-11-14 11:27:08</td><td>2025-12-09 11:18:35</td><td class="truncate">TechVision Solutions</td><td>
                      <a class="action-link delete" onclick="confirmRemoveDevice('T8124P40233A001B')">Remove</a>
                    </td></tr>
                  <tr><td>T8210P82232B0016</td><td>T8210P82232B0016</td><td style="color: var(--brand-fg-primary);">admin@example.com</td><td>3.0.8.2</td><td>0.2.2.3</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Online
                      </span>
                    </td><td>2023-06-02 18:54:34</td><td>2025-11-14 11:24:46</td><td>2026-01-05 14:22:11</td><td class="truncate">SmartGrid Energy</td><td>
                      <a class="action-link delete" onclick="confirmRemoveDevice('T8210P82232B0016')">Remove</a>
                    </td></tr>
                  <tr><td>T8010N31933C0046</td><td>HB2</td><td style="color: var(--brand-fg-primary);">contact@example.com</td><td>4.2.6.8</td><td>1.3.0.9</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Online
                      </span>
                    </td><td>2019-08-21 20:34:48</td><td>2025-11-26 03:45:22</td><td>2025-11-14 11:23:34</td><td class="truncate">PowerFlow Systems</td><td>
                      <a class="action-link delete" onclick="confirmRemoveDevice('T8010N31933C0046')">Remove</a>
                    </td></tr>
                  <tr><td>T8P00530252D7E5C</td><td>Back Yard-PoE</td><td style="color: var(--brand-fg-primary);">support@example.com</td><td>1.0.7.4</td><td>-</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Online
                      </span>
                    </td><td>2025-07-15 15:13:56</td><td>2025-10-15 17:58:51</td><td>2026-01-06 10:15:42</td><td class="truncate">EcoCharge Solutions</td><td>
                      <a class="action-link delete" onclick="confirmRemoveDevice('T8P00530252D7E5C')">Remove</a>
                    </td></tr>
                  <tr><td>T8E00510252EA05B</td><td>Front Yard-PoE</td><td style="color: var(--brand-fg-primary);">info@example.com</td><td>1.1.0.3</td><td>-</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Online
                      </span>
                    </td><td>2025-07-14 16:59:21</td><td>2025-10-15 17:44:07</td><td>2026-01-06 10:30:18</td><td class="truncate">GreenWatt Technologies</td><td>
                      <a class="action-link delete" onclick="confirmRemoveDevice('T8E00510252EA05B')">Remove</a>
                    </td></tr>
                  <tr><td>T821451024F371EF</td><td>Doorbell2</td><td style="color: var(--brand-fg-primary);">hello@example.com</td><td>3.2.1.4</td><td>0.3.5.3</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Online
                      </span>
                    </td><td>2024-11-18 11:55:06</td><td>2025-10-15 16:21:13</td><td>2026-01-06 10:45:55</td><td class="truncate">VoltSecure Inc</td><td>
                      <a class="action-link delete" onclick="confirmRemoveDevice('T821451024F371EF')">Remove</a>
                    </td></tr>
                  <tr><td>T8162T10244G716D</td><td>Front Yard</td><td style="color: var(--brand-fg-primary);">service@example.com</td><td>3.1.2.7</td><td>0.0.8.6</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Online
                      </span>
                    </td><td>2024-12-04 15:40:13</td><td>2025-10-15 16:20:42</td><td>2026-01-06 10:52:28</td><td class="truncate">EnergySmart Corp</td><td>
                      <a class="action-link delete" onclick="confirmRemoveDevice('T8162T10244G716D')">Remove</a>
                    </td></tr>
                  <tr><td>T8124P40233H002C</td><td>Smart Camera Pro</td><td style="color: var(--brand-fg-primary);">demo@example.com</td><td>3.3.1.5</td><td>0.1.2.0</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Online
                      </span>
                    </td><td>2024-09-28 09:15:42</td><td>2025-11-20 08:35:19</td><td>2026-01-08 14:22:56</td><td class="truncate">PowerLink Systems</td><td>
                      <a class="action-link delete" onclick="confirmRemoveDevice('T8124P40233H002C')">Remove</a>
                    </td></tr>
                  <tr><td>T8P00530252J08F6</td><td>Garage Entrance</td><td style="color: var(--brand-fg-primary);">test@example.com</td><td>1.0.9.2</td><td>-</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Online
                      </span>
                    </td><td>2025-08-03 12:28:17</td><td>2025-10-22 09:14:33</td><td>2026-01-09 11:05:47</td><td class="truncate">CleanEnergy Partners</td><td>
                      <a class="action-link delete" onclick="confirmRemoveDevice('T8P00530252J08F6')">Remove</a>
                    </td></tr>
                  <tr><td>T8010N31933K0047</td><td>Security Hub</td><td style="color: var(--brand-fg-primary);">sample@example.com</td><td>4.3.2.1</td><td>1.4.1.2</td><td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #34C759; border-radius: 50%;"></span>
                        Online
                      </span>
                    </td><td>2020-03-15 14:22:30</td><td>2025-11-18 10:42:15</td><td>2025-12-20 16:38:44</td><td class="truncate">FutureGrid Systems</td><td>
                      <a class="action-link delete" onclick="confirmRemoveDevice('T8010N31933K0047')">Remove</a>
                    </td></tr>
                </tbody>
              </table>
            </div>

            <div class="pagination">
              <div class="pagination-info">1-10 of 10 items</div>
              <div class="pagination-controls">
                <button class="pagination-btn">‹</button>
                <button class="pagination-btn active">1</button>
                <button class="pagination-btn">›</button>
                <div class="custom-select page-size-select">
                  <div class="custom-select-trigger" style="font-size: var(--font-caption); padding: 6px 32px 6px 10px;">10 / page</div>
                  <div class="custom-select-dropdown">
                    <div class="custom-select-option selected" data-value="10 / page">10 / page</div>
                    <div class="custom-select-option" data-value="20 / page">20 / page</div>
                    <div class="custom-select-option" data-value="50 / page">50 / page</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Approval Content -->
        <div id="approvalContent" class="main-content" style="display: none;">
          <!-- Search Section -->
          <div class="search-section">
            <div id="approvalSearchGrid" style="display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 16px 24px; align-items: center; width: 100%;">
              <!-- Field 1: Business Type -->
              <div style="display: flex; align-items: center; gap: 8px; min-width: 0;">
                <label class="search-label" style="white-space: nowrap; margin: 0; flex-shrink: 0;">Business Type:</label>
                <div class="custom-select multi-select" id="businessTypeFilterSelect" style="flex: 1; min-width: 0;">
                  <div class="custom-select-trigger" style="width: 100%;">All</div>
                  <div class="custom-select-dropdown">
                    <div class="custom-select-option selected" data-value="Installer" onclick="toggleBusinessTypeOption(event, 'Installer')">
                      <input type="checkbox" checked onclick="event.stopPropagation()">
                      <span>Installer</span>
                    </div>
                    <div class="custom-select-option selected" data-value="Installer (SaaS)" onclick="toggleBusinessTypeOption(event, 'Installer (SaaS)')">
                      <input type="checkbox" checked onclick="event.stopPropagation()">
                      <span>Installer (SaaS)</span>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Field 2: Status -->
              <div style="display: flex; align-items: center; gap: 8px; min-width: 0;">
                <label class="search-label" style="white-space: nowrap; margin: 0; flex-shrink: 0;">Status:</label>
                <div class="custom-select multi-select" id="statusFilterSelect" style="flex: 1; min-width: 0;">
                  <div class="custom-select-trigger" style="width: 100%;">Pending</div>
                  <div class="custom-select-dropdown">
                    <div class="custom-select-option selected" data-value="Pending" onclick="toggleStatusOption(event, 'Pending')">
                      <input type="checkbox" checked onclick="event.stopPropagation()">
                      <span>Pending</span>
                    </div>
                    <div class="custom-select-option" data-value="Approved" onclick="toggleStatusOption(event, 'Approved')">
                      <input type="checkbox" onclick="event.stopPropagation()">
                      <span>Approved</span>
                    </div>
                    <div class="custom-select-option" data-value="Rejected" onclick="toggleStatusOption(event, 'Rejected')">
                      <input type="checkbox" onclick="event.stopPropagation()">
                      <span>Rejected</span>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Buttons - Default Position (Row 1, Column 3) -->
              <div id="approvalButtonsCollapsed" style="display: flex; gap: 12px; justify-content: flex-end; align-items: center;">
                <button class="btn btn-primary">Search</button>
                <button class="btn btn-secondary">Reset</button>
                <a id="approvalExpandToggle" href="javascript:void(0)" onclick="toggleApprovalSearchExpand()" style="color: var(--brand-fg-primary); text-decoration: none; line-height: 1;">Expand</a>
              </div>
              <!-- Field 3: Tenant Account (Hidden by default) -->
              <div id="approvalField3" style="display: none; align-items: center; gap: 8px; min-width: 0;">
                <label class="search-label" style="white-space: nowrap; margin: 0; flex-shrink: 0;">Tenant Account:</label>
                <input type="text" class="search-input" placeholder="Please enter" style="flex: 1; min-width: 0; width: 100%;">
              </div>
              <!-- Field 4: Company Name (Hidden by default) -->
              <div id="approvalField4" style="display: none; align-items: center; gap: 8px; min-width: 0;">
                <label class="search-label" style="white-space: nowrap; margin: 0; flex-shrink: 0;">Company Name:</label>
                <input type="text" class="search-input" placeholder="Please enter" style="flex: 1; min-width: 0; width: 100%;">
              </div>
              <!-- Empty cell to push buttons to column 3 -->
              <div id="approvalEmptyCell" style="display: none;"></div>
              <!-- Buttons - Expanded Position (Row 2, Column 3) -->
              <div id="approvalButtonsExpanded" style="display: none; gap: 12px; justify-content: flex-end; align-items: center;">
                <button class="btn btn-primary">Search</button>
                <button class="btn btn-secondary">Reset</button>
                <a href="javascript:void(0)" onclick="toggleApprovalSearchExpand()" style="color: var(--brand-fg-primary); text-decoration: none; line-height: 1;">Pack Up</a>
              </div>
            </div>
          </div>

          <!-- Approval List Section -->
          <div class="list-section">
            <div class="list-header">
              <h2 class="list-title">Approval List</h2>
            </div>

            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>Company Name</th>
                    <th>Company Description</th>
                    <th>Tenant Account</th>
                    <th>Business Type</th>
                    <th>Status</th>
                    <th>Create Time</th>
                    <th>Operate</th>
                  </tr>
                </thead>
                <tbody id="approvalTableBody">
                  <tr data-status="Pending" data-business-type="Installer">
                    <td class="truncate">TechVision Solutions</td>
                    <td class="truncate">Energy management system integrator.</td>
                    <td style="color: var(--brand-fg-primary);">tenant1@example.com</td>
                    <td>Installer</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #1890FF; border-radius: 50%;"></span>
                        Pending
                      </span>
                    </td>
                    <td>2026-01-10 14:22:15</td>
                    <td>
                      <a class="action-link review" onclick="openApprovalReview('pending', 'TechVision Solutions', 'tenant1@example.com')">Review</a>
                    </td>
                  </tr>
                  <tr data-status="Approved" data-business-type="Installer (SaaS)">
                    <td class="truncate">GreenPower Systems</td>
                    <td class="truncate">Renewable energy solutions provider.</td>
                    <td style="color: var(--brand-fg-primary);">tenant2@example.com</td>
                    <td>Installer (SaaS)</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #52C41A; border-radius: 50%;"></span>
                        Approved
                      </span>
                    </td>
                    <td>2026-01-08 10:15:33</td>
                    <td>
                      <a class="action-link details" onclick="openApprovalReview('approved', 'GreenPower Systems', 'tenant2@example.com')">Details</a>
                    </td>
                  </tr>
                  <tr data-status="Rejected" data-business-type="Installer (SaaS)">
                    <td class="truncate">SmartHome Technologies</td>
                    <td class="truncate">Home automation and IoT integration.</td>
                    <td style="color: var(--brand-fg-primary);">tenant3@example.com</td>
                    <td>Installer (SaaS)</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #FF4D4F; border-radius: 50%;"></span>
                        Rejected
                      </span>
                    </td>
                    <td>2026-01-07 16:45:20</td>
                    <td>
                      <a class="action-link details" onclick="openApprovalReview('rejected', 'SmartHome Technologies', 'tenant3@example.com')">Details</a>
                    </td>
                  </tr>
                  <tr data-status="Pending" data-business-type="Installer">
                    <td class="truncate">EcoCharge Networks</td>
                    <td class="truncate">Electric vehicle charging infrastructure.</td>
                    <td style="color: var(--brand-fg-primary);">tenant4@example.com</td>
                    <td>Installer</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #1890FF; border-radius: 50%;"></span>
                        Pending
                      </span>
                    </td>
                    <td>2026-01-06 09:30:45</td>
                    <td>
                      <a class="action-link review" onclick="openApprovalReview('pending', 'EcoCharge Networks', 'tenant4@example.com')">Review</a>
                    </td>
                  </tr>
                  <tr data-status="Approved" data-business-type="Installer (SaaS)">
                    <td class="truncate">PowerGrid Innovations</td>
                    <td class="truncate">Smart grid and energy storage solutions.</td>
                    <td style="color: var(--brand-fg-primary);">tenant5@example.com</td>
                    <td>Installer (SaaS)</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #52C41A; border-radius: 50%;"></span>
                        Approved
                      </span>
                    </td>
                    <td>2026-01-05 13:20:18</td>
                    <td>
                      <a class="action-link details" onclick="openApprovalReview('approved', 'PowerGrid Innovations', 'tenant5@example.com')">Details</a>
                    </td>
                  </tr>
                  <tr data-status="Pending" data-business-type="Installer (SaaS)">
                    <td class="truncate">SolarCloud Services</td>
                    <td class="truncate">Cloud-based solar energy monitoring platform.</td>
                    <td style="color: var(--brand-fg-primary);">tenant6@example.com</td>
                    <td>Installer (SaaS)</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #1890FF; border-radius: 50%;"></span>
                        Pending
                      </span>
                    </td>
                    <td>2026-01-04 11:15:30</td>
                    <td>
                      <a class="action-link review" onclick="openApprovalReview('pending', 'SolarCloud Services', 'tenant6@example.com')">Review</a>
                    </td>
                  </tr>
                  <tr data-status="Approved" data-business-type="Installer (SaaS)">
                    <td class="truncate">EnergyHub Platform</td>
                    <td class="truncate">Integrated energy management SaaS solution.</td>
                    <td style="color: var(--brand-fg-primary);">tenant7@example.com</td>
                    <td>Installer (SaaS)</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #52C41A; border-radius: 50%;"></span>
                        Approved
                      </span>
                    </td>
                    <td>2026-01-03 14:45:55</td>
                    <td>
                      <a class="action-link details" onclick="openApprovalReview('approved', 'EnergyHub Platform', 'tenant7@example.com')">Details</a>
                    </td>
                  </tr>
                  <tr data-status="Pending" data-business-type="Installer (SaaS)">
                    <td class="truncate">CleanTech Analytics</td>
                    <td class="truncate">AI-powered energy optimization software.</td>
                    <td style="color: var(--brand-fg-primary);">tenant8@example.com</td>
                    <td>Installer (SaaS)</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #1890FF; border-radius: 50%;"></span>
                        Pending
                      </span>
                    </td>
                    <td>2026-01-02 09:20:12</td>
                    <td>
                      <a class="action-link review" onclick="openApprovalReview('pending', 'CleanTech Analytics', 'tenant8@example.com')">Review</a>
                    </td>
                  </tr>
                  <tr data-status="Approved" data-business-type="Installer (SaaS)">
                    <td class="truncate">SmartEnergy Solutions</td>
                    <td class="truncate">Remote monitoring and control SaaS platform.</td>
                    <td style="color: var(--brand-fg-primary);">tenant9@example.com</td>
                    <td>Installer (SaaS)</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #52C41A; border-radius: 50%;"></span>
                        Approved
                      </span>
                    </td>
                    <td>2026-01-01 16:30:40</td>
                    <td>
                      <a class="action-link details" onclick="openApprovalReview('approved', 'SmartEnergy Solutions', 'tenant9@example.com')">Details</a>
                    </td>
                  </tr>
                  <tr data-status="Rejected" data-business-type="Installer (SaaS)">
                    <td class="truncate">PowerSoft Systems</td>
                    <td class="truncate">Cloud-based energy billing and analytics.</td>
                    <td style="color: var(--brand-fg-primary);">tenant10@example.com</td>
                    <td>Installer (SaaS)</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #FF4D4F; border-radius: 50%;"></span>
                        Rejected
                      </span>
                    </td>
                    <td>2025-12-30 10:50:25</td>
                    <td>
                      <a class="action-link details" onclick="openApprovalReview('rejected', 'PowerSoft Systems', 'tenant10@example.com')">Details</a>
                    </td>
                  </tr>
                  <tr data-status="Pending" data-business-type="Installer">
                    <td class="truncate">SunPower Installation Co.</td>
                    <td class="truncate">Professional solar panel installation services.</td>
                    <td style="color: var(--brand-fg-primary);">tenant11@example.com</td>
                    <td>Installer</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #1890FF; border-radius: 50%;"></span>
                        Pending
                      </span>
                    </td>
                    <td>2025-12-28 15:40:35</td>
                    <td>
                      <a class="action-link review" onclick="openApprovalReview('pending', 'SunPower Installation Co.', 'tenant11@example.com')">Review</a>
                    </td>
                  </tr>
                  <tr data-status="Approved" data-business-type="Installer">
                    <td class="truncate">GreenTech Installers</td>
                    <td class="truncate">Renewable energy system installation and maintenance.</td>
                    <td style="color: var(--brand-fg-primary);">tenant12@example.com</td>
                    <td>Installer</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #52C41A; border-radius: 50%;"></span>
                        Approved
                      </span>
                    </td>
                    <td>2025-12-27 09:15:20</td>
                    <td>
                      <a class="action-link details" onclick="openApprovalReview('approved', 'GreenTech Installers', 'tenant12@example.com')">Details</a>
                    </td>
                  </tr>
                  <tr data-status="Pending" data-business-type="Installer">
                    <td class="truncate">EcoInstall Partners</td>
                    <td class="truncate">Energy storage and solar installation specialist.</td>
                    <td style="color: var(--brand-fg-primary);">tenant13@example.com</td>
                    <td>Installer</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #1890FF; border-radius: 50%;"></span>
                        Pending
                      </span>
                    </td>
                    <td>2025-12-26 13:25:50</td>
                    <td>
                      <a class="action-link review" onclick="openApprovalReview('pending', 'EcoInstall Partners', 'tenant13@example.com')">Review</a>
                    </td>
                  </tr>
                  <tr data-status="Approved" data-business-type="Installer">
                    <td class="truncate">PowerLine Installations</td>
                    <td class="truncate">Commercial and residential power system installer.</td>
                    <td style="color: var(--brand-fg-primary);">tenant14@example.com</td>
                    <td>Installer</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #52C41A; border-radius: 50%;"></span>
                        Approved
                      </span>
                    </td>
                    <td>2025-12-25 10:50:15</td>
                    <td>
                      <a class="action-link details" onclick="openApprovalReview('approved', 'PowerLine Installations', 'tenant14@example.com')">Details</a>
                    </td>
                  </tr>
                  <tr data-status="Approved" data-business-type="Installer">
                    <td class="truncate">SolarEdge Contractors</td>
                    <td class="truncate">Licensed solar and battery system installer.</td>
                    <td style="color: var(--brand-fg-primary);">tenant15@example.com</td>
                    <td>Installer</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #52C41A; border-radius: 50%;"></span>
                        Approved
                      </span>
                    </td>
                    <td>2025-12-24 14:30:42</td>
                    <td>
                      <a class="action-link details" onclick="openApprovalReview('approved', 'SolarEdge Contractors', 'tenant15@example.com')">Details</a>
                    </td>
                  </tr>
                  <tr data-status="Pending" data-business-type="Installer">
                    <td class="truncate">CleanEnergy Installation Group</td>
                    <td class="truncate">Full-service renewable energy installation company.</td>
                    <td style="color: var(--brand-fg-primary);">tenant16@example.com</td>
                    <td>Installer</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #1890FF; border-radius: 50%;"></span>
                        Pending
                      </span>
                    </td>
                    <td>2025-12-23 11:20:08</td>
                    <td>
                      <a class="action-link review" onclick="openApprovalReview('pending', 'CleanEnergy Installation Group', 'tenant16@example.com')">Review</a>
                    </td>
                  </tr>
                  <tr data-status="Rejected" data-business-type="Installer">
                    <td class="truncate">VoltTech Installers</td>
                    <td class="truncate">Electrical and solar installation services.</td>
                    <td style="color: var(--brand-fg-primary);">tenant17@example.com</td>
                    <td>Installer</td>
                    <td>
                      <span style="display: inline-flex; align-items: center; gap: 6px;">
                        <span style="width: 8px; height: 8px; background: #FF4D4F; border-radius: 50%;"></span>
                        Rejected
                      </span>
                    </td>
                    <td>2025-12-22 16:45:30</td>
                    <td>
                      <a class="action-link details" onclick="openApprovalReview('rejected', 'VoltTech Installers', 'tenant17@example.com')">Details</a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="pagination">
              <div class="pagination-info">1-5 of 5 items</div>
              <div class="pagination-controls">
                <button class="pagination-btn">‹</button>
                <button class="pagination-btn active">1</button>
                <button class="pagination-btn">›</button>
                <div class="custom-select page-size-select">
                  <div class="custom-select-trigger" style="font-size: var(--font-caption); padding: 6px 32px 6px 10px;">10 / page</div>
                  <div class="custom-select-dropdown">
                    <div class="custom-select-option selected" data-value="10 / page">10 / page</div>
                    <div class="custom-select-option" data-value="20 / page">20 / page</div>
                    <div class="custom-select-option" data-value="50 / page">50 / page</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast">
    <svg class="toast-icon" viewBox="0 0 24 24" fill="currentColor">
      <path id="toastIconPath" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
    </svg>
    <span class="toast-message" id="toastMessage"></span>
  </div>

  <!-- Create/Edit Company Modal -->
  <div class="modal-overlay" id="companyModal">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Create Company</h2>
        <span class="modal-close" onclick="closeCompanyModal()">×</span>
      </div>
      <div class="modal-body">
        <div class="modal-left">
          <div class="form-group">
            <label class="form-label required">Company Name</label>
            <input type="text" class="form-input" id="companyName" placeholder="Please enter">
          </div>
          <div class="form-group">
            <label class="form-label">Company Description</label>
            <textarea class="form-textarea" id="companyDescription" placeholder="Maximum 200 characters" maxlength="200" oninput="updateCharCount()"></textarea>
            <div class="char-count" id="charCount">0 / 200</div>
          </div>
          <div class="form-group">
            <label class="form-label required">Business Type</label>
            <div class="custom-select" id="businessTypeSelect" style="width: 100%;">
              <div class="custom-select-trigger" style="width: 100%;">Others</div>
              <div class="custom-select-dropdown">
                <div class="custom-select-option selected" data-value="Others">Others</div>
                <div class="custom-select-option" data-value="Integrator">Integrator</div>
                <div class="custom-select-option" data-value="Installer">Installer</div>
                <div class="custom-select-option" data-value="Installer (SaaS)">Installer (SaaS)</div>
              </div>
            </div>
            <input type="hidden" id="businessType" value="Others">
          </div>

          <!-- Data Permission -->
          <div class="form-group">
            <label class="form-label required">Data Permission</label>
            <div class="custom-select" id="dataPermissionSelect" style="width: 100%;">
              <div class="custom-select-trigger" style="width: 100%;">Company-related</div>
              <div class="custom-select-dropdown">
                <div class="custom-select-option selected" data-value="Company-related">Company-related</div>
                <div class="custom-select-option" data-value="All">All</div>
              </div>
            </div>
            <input type="hidden" id="dataPermission" value="Company-related">
          </div>

          <!-- App Permission -->
          <div class="form-group">
            <label class="form-label required">App Permission</label>
            <div class="custom-select" id="appPermissionSelect" style="width: 100%;">
              <div class="custom-select-trigger" style="width: 100%;">Disable</div>
              <div class="custom-select-dropdown">
                <div class="custom-select-option" data-value="Enable">Enable</div>
                <div class="custom-select-option selected" data-value="Disable">Disable</div>
              </div>
            </div>
            <input type="hidden" id="appPermission" value="Disable">
          </div>

          <!-- SaaS Permission -->
          <div class="form-group">
            <label class="form-label required">SaaS Permission</label>
            <div class="custom-select" id="saasPermissionSelect" style="width: 100%;">
              <div class="custom-select-trigger" style="width: 100%;">Disable</div>
              <div class="custom-select-dropdown">
                <div class="custom-select-option" data-value="Enable">Enable</div>
                <div class="custom-select-option selected" data-value="Disable">Disable</div>
              </div>
            </div>
            <input type="hidden" id="saasPermission" value="Disable">
          </div>
        </div>
        <div class="modal-right">
          <div class="permission-header">
            <div class="permission-title">Web Permission</div>
            <div class="permission-count" id="permissionCount">0 / 33</div>
          </div>
          <div class="select-all-wrapper">
            <input type="checkbox" id="selectAll" class="tree-checkbox" onchange="toggleSelectAll()">
            <label class="select-all-label" for="selectAll">Select All</label>
          </div>
          <div class="permission-tree" id="permissionTree">
            <!-- Dashboard -->
            <div class="tree-item">
              <div class="tree-node">
                <span class="tree-toggle empty">▸</span>
                <input type="checkbox" class="tree-checkbox" data-id="dashboard" onchange="handleCheckboxChange(this)">
                <span class="tree-label">Dashboard</span>
              </div>
            </div>

            <!-- User -->
            <div class="tree-item">
              <div class="tree-node">
                <span class="tree-toggle" onclick="toggleTreeNode(this)">▾</span>
                <input type="checkbox" class="tree-checkbox" data-id="user" onchange="handleCheckboxChange(this)">
                <span class="tree-label">User</span>
              </div>
              <div class="tree-children expanded">
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle empty">▸</span>
                    <input type="checkbox" class="tree-checkbox" data-id="user-detail-button" onchange="handleCheckboxChange(this)">
                    <span class="tree-label button-label">└─ User Detail (button)</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- User Detail (standalone) -->
            <div class="tree-item">
              <div class="tree-node">
                <span class="tree-toggle empty">▸</span>
                <input type="checkbox" class="tree-checkbox" data-id="user-detail-page" onchange="handleCheckboxChange(this)">
                <span class="tree-label">User Detail</span>
              </div>
            </div>

            <!-- Device -->
            <div class="tree-item">
              <div class="tree-node">
                <span class="tree-toggle" onclick="toggleTreeNode(this)">▾</span>
                <input type="checkbox" class="tree-checkbox" data-id="device" onchange="handleCheckboxChange(this)">
                <span class="tree-label">Device</span>
              </div>
              <div class="tree-children expanded">
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle empty">▸</span>
                    <input type="checkbox" class="tree-checkbox" data-id="device-user-detail" onchange="handleCheckboxChange(this)">
                    <span class="tree-label button-label">└─ User Detail (button)</span>
                  </div>
                </div>
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle empty">▸</span>
                    <input type="checkbox" class="tree-checkbox" data-id="device-remove" onchange="handleCheckboxChange(this)">
                    <span class="tree-label button-label">└─ Remove (button)</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Service -->
            <div class="tree-item">
              <div class="tree-node">
                <span class="tree-toggle" onclick="toggleTreeNode(this)">▾</span>
                <input type="checkbox" class="tree-checkbox" data-id="service" onchange="handleCheckboxChange(this)">
                <span class="tree-label">Service</span>
              </div>
              <div class="tree-children expanded">
                <!-- Expert Monitoring -->
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle" onclick="toggleTreeNode(this)">▾</span>
                    <input type="checkbox" class="tree-checkbox" data-id="expert-monitoring" onchange="handleCheckboxChange(this)">
                    <span class="tree-label">Expert Monitoring</span>
                  </div>
                  <div class="tree-children expanded">
                    <div class="tree-item">
                      <div class="tree-node">
                        <span class="tree-toggle empty">▸</span>
                        <input type="checkbox" class="tree-checkbox" data-id="expert-user-detail" onchange="handleCheckboxChange(this)">
                        <span class="tree-label button-label">└─ User Detail (button)</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Warranty -->
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle" onclick="toggleTreeNode(this)">▾</span>
                    <input type="checkbox" class="tree-checkbox" data-id="warranty" onchange="handleCheckboxChange(this)">
                    <span class="tree-label">Warranty</span>
                  </div>
                  <div class="tree-children expanded">
                    <div class="tree-item">
                      <div class="tree-node">
                        <span class="tree-toggle empty">▸</span>
                        <input type="checkbox" class="tree-checkbox" data-id="warranty-detail-button" onchange="handleCheckboxChange(this)">
                        <span class="tree-label button-label">└─ Detail (button)</span>
                      </div>
                    </div>
                    <div class="tree-item">
                      <div class="tree-node">
                        <span class="tree-toggle empty">▸</span>
                        <input type="checkbox" class="tree-checkbox" data-id="warranty-export" onchange="handleCheckboxChange(this)">
                        <span class="tree-label button-label">└─ Export (button)</span>
                      </div>
                    </div>
                    <div class="tree-item">
                      <div class="tree-node">
                        <span class="tree-toggle empty">▸</span>
                        <input type="checkbox" class="tree-checkbox" data-id="warranty-reconciliation" onchange="handleCheckboxChange(this)">
                        <span class="tree-label button-label">└─ Reconciliation (button)</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Warranty Detail (standalone) -->
            <div class="tree-item">
              <div class="tree-node">
                <span class="tree-toggle empty">▸</span>
                <input type="checkbox" class="tree-checkbox" data-id="warranty-detail-page" onchange="handleCheckboxChange(this)">
                <span class="tree-label">Warranty Detail</span>
              </div>
            </div>

            <!-- Alarm History -->
            <div class="tree-item">
              <div class="tree-node">
                <span class="tree-toggle" onclick="toggleTreeNode(this)">▾</span>
                <input type="checkbox" class="tree-checkbox" data-id="alarm-history" onchange="handleCheckboxChange(this)">
                <span class="tree-label">Alarm History</span>
              </div>
              <div class="tree-children expanded">
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle empty">▸</span>
                    <input type="checkbox" class="tree-checkbox" data-id="alarm-user-detail" onchange="handleCheckboxChange(this)">
                    <span class="tree-label button-label">└─ User Detail (button)</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Resource -->
            <div class="tree-item">
              <div class="tree-node">
                <span class="tree-toggle" onclick="toggleTreeNode(this)">▾</span>
                <input type="checkbox" class="tree-checkbox" data-id="resource" onchange="handleCheckboxChange(this)">
                <span class="tree-label">Resource</span>
              </div>
              <div class="tree-children expanded">
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle empty">▸</span>
                    <input type="checkbox" class="tree-checkbox" data-id="resource-eufy" onchange="handleCheckboxChange(this)">
                    <span class="tree-label">eufy</span>
                  </div>
                </div>
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle empty">▸</span>
                    <input type="checkbox" class="tree-checkbox" data-id="resource-charging" onchange="handleCheckboxChange(this)">
                    <span class="tree-label">Charging</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Company Information -->
            <div class="tree-item">
              <div class="tree-node">
                <span class="tree-toggle empty">▸</span>
                <input type="checkbox" class="tree-checkbox" data-id="company-information" onchange="handleCheckboxChange(this)">
                <span class="tree-label">Company Information</span>
              </div>
            </div>

            <!-- Account -->
            <div class="tree-item">
              <div class="tree-node">
                <span class="tree-toggle" onclick="toggleTreeNode(this)">▾</span>
                <input type="checkbox" class="tree-checkbox" data-id="account" onchange="handleCheckboxChange(this)">
                <span class="tree-label">Account</span>
              </div>
              <div class="tree-children expanded">
                <!-- Account List -->
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle" onclick="toggleTreeNode(this)">▾</span>
                    <input type="checkbox" class="tree-checkbox" data-id="account-list" onchange="handleCheckboxChange(this)">
                    <span class="tree-label">Account List</span>
                  </div>
                  <div class="tree-children expanded">
                    <div class="tree-item">
                      <div class="tree-node">
                        <span class="tree-toggle empty">▸</span>
                        <input type="checkbox" class="tree-checkbox" data-id="account-list-create" onchange="handleCheckboxChange(this)">
                        <span class="tree-label button-label">└─ Create (button)</span>
                      </div>
                    </div>
                    <div class="tree-item">
                      <div class="tree-node">
                        <span class="tree-toggle empty">▸</span>
                        <input type="checkbox" class="tree-checkbox" data-id="account-list-edit" onchange="handleCheckboxChange(this)">
                        <span class="tree-label button-label">└─ Edit (button)</span>
                      </div>
                    </div>
                    <div class="tree-item">
                      <div class="tree-node">
                        <span class="tree-toggle empty">▸</span>
                        <input type="checkbox" class="tree-checkbox" data-id="account-list-delete" onchange="handleCheckboxChange(this)">
                        <span class="tree-label button-label">└─ Delete (button)</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Role -->
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle" onclick="toggleTreeNode(this)">▾</span>
                    <input type="checkbox" class="tree-checkbox" data-id="role" onchange="handleCheckboxChange(this)">
                    <span class="tree-label">Role</span>
                  </div>
                  <div class="tree-children expanded">
                    <div class="tree-item">
                      <div class="tree-node">
                        <span class="tree-toggle empty">▸</span>
                        <input type="checkbox" class="tree-checkbox" data-id="role-create" onchange="handleCheckboxChange(this)">
                        <span class="tree-label button-label">└─ Create (button)</span>
                      </div>
                    </div>
                    <div class="tree-item">
                      <div class="tree-node">
                        <span class="tree-toggle empty">▸</span>
                        <input type="checkbox" class="tree-checkbox" data-id="role-edit" onchange="handleCheckboxChange(this)">
                        <span class="tree-label button-label">└─ Edit (button)</span>
                      </div>
                    </div>
                    <div class="tree-item">
                      <div class="tree-node">
                        <span class="tree-toggle empty">▸</span>
                        <input type="checkbox" class="tree-checkbox" data-id="role-delete" onchange="handleCheckboxChange(this)">
                        <span class="tree-label button-label">└─ Delete (button)</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Log -->
            <div class="tree-item">
              <div class="tree-node">
                <span class="tree-toggle" onclick="toggleTreeNode(this)">▾</span>
                <input type="checkbox" class="tree-checkbox" data-id="log" onchange="handleCheckboxChange(this)">
                <span class="tree-label">Log</span>
              </div>
              <div class="tree-children expanded">
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle empty">▸</span>
                    <input type="checkbox" class="tree-checkbox" data-id="login-log" onchange="handleCheckboxChange(this)">
                    <span class="tree-label">Login Log</span>
                  </div>
                </div>
                <div class="tree-item">
                  <div class="tree-node">
                    <span class="tree-toggle empty">▸</span>
                    <input type="checkbox" class="tree-checkbox" data-id="operation-log" onchange="handleCheckboxChange(this)">
                    <span class="tree-label">Operation Log</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeCompanyModal()">Cancel</button>
        <button class="btn btn-primary" onclick="saveCompany()">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Approval Review Modal (Drawer) -->
  <div class="modal-overlay" id="approvalReviewModal">
    <div class="modal">
      <div class="modal-header">
        <div style="display: flex; align-items: center; gap: 12px;">
          <h2 class="modal-title" id="approvalReviewTitle">Approval Review</h2>
          <span id="approvalTitleStatus"></span>
        </div>
        <span class="modal-close" onclick="closeApprovalReview()">×</span>
      </div>
      <div class="modal-body" style="display: block; padding: var(--spacing-xl); flex: 1; overflow-y: auto;">
        <!-- Approval Information (Top, for approved/rejected) -->
        <div id="approvalResultSection" style="display: none; background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-bottom: var(--spacing-xl);">
          <h3 style="font-size: var(--font-title); font-weight: var(--font-weight-semibold); margin-bottom: var(--spacing-lg);">Approval Information</h3>
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--spacing-lg);">
            <div>
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 4px;">Reviewer</div>
              <div id="reviewedBy">admin@example.com</div>
            </div>
            <div>
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 4px;">Review Time</div>
              <div id="reviewTime">2026-01-10 15:30:22</div>
            </div>
            <div id="rejectReasonDiv" style="display: none; grid-column: 1 / -1;">
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 4px;">Reject Reason</div>
              <div id="rejectReasonText" style="color: #FF4D4F;">Insufficient documentation provided.</div>
            </div>
          </div>
        </div>

        <!-- Basic Information -->
        <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-bottom: var(--spacing-xl);">
          <h3 style="font-size: var(--font-title); font-weight: var(--font-weight-semibold); margin-bottom: var(--spacing-lg);">Basic Information</h3>
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--spacing-lg);">
            <div>
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 4px;">Company Name</div>
              <div id="reviewCompanyName" style="color: var(--fg-primary); font-weight: var(--font-weight-semibold);">TechVision Solutions</div>
            </div>
            <div>
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 4px;">Company Description</div>
              <div id="reviewCompanyDescription">Energy management system integrator.</div>
            </div>
            <div>
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 4px;">Tenant Account</div>
              <div id="reviewTenantAccount" style="color: var(--brand-fg-primary);">tenant1@example.com</div>
            </div>
            <div>
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 4px;">Business Type</div>
              <div id="reviewBusinessType">Installer</div>
            </div>
          </div>
        </div>

        <!-- Additional Fields -->
        <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px; margin-bottom: var(--spacing-xl);">
          <h3 style="font-size: var(--font-title); font-weight: var(--font-weight-semibold); margin-bottom: var(--spacing-lg);">Additional Information</h3>
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--spacing-lg);">
            <div>
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 4px;">Sales Region</div>
              <div>North America</div>
            </div>
            <div>
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 4px;">State and City</div>
              <div>California, San Francisco</div>
            </div>
          </div>
        </div>

        <!-- Attachments -->
        <div style="background: var(--bg-tertiary); padding: var(--spacing-lg); border-radius: 8px;">
          <h3 style="font-size: var(--font-title); font-weight: var(--font-weight-semibold); margin-bottom: var(--spacing-lg);">Attachments <span style="color: var(--fg-tertiary); font-weight: var(--font-weight-regular); font-size: var(--font-body);">(3)</span></h3>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--spacing-lg);">
            <!-- Business License -->
            <div>
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 8px;">Business License</div>
              <div class="attachment-thumbnail" onclick="openImagePreview('business-license', 'Business License')" style="background: #f5f5f5; border-radius: 4px; aspect-ratio: 1/1; display: flex; align-items: center; justify-content: center; border: 1px solid var(--color-border-secondary);">
                <img id="businessLicenseImg" alt="Business License" style="max-width: 100%; max-height: 100%; object-fit: contain; cursor: pointer;">
              </div>
            </div>
            <!-- Sales License -->
            <div>
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 8px;">Sales License</div>
              <div class="attachment-thumbnail" onclick="openImagePreview('sales-license', 'Sales License')" style="background: #f5f5f5; border-radius: 4px; aspect-ratio: 1/1; display: flex; align-items: center; justify-content: center; border: 1px solid var(--color-border-secondary);">
                <img id="salesLicenseImg" alt="Sales License" style="max-width: 100%; max-height: 100%; object-fit: contain; cursor: pointer;">
              </div>
            </div>
            <!-- Insurance -->
            <div>
              <div style="color: var(--fg-secondary); font-size: var(--font-caption); margin-bottom: 8px;">Insurance</div>
              <div class="attachment-thumbnail" onclick="openImagePreview('insurance', 'Insurance')" style="background: #f5f5f5; border-radius: 4px; aspect-ratio: 1/1; display: flex; align-items: center; justify-content: center; border: 1px solid var(--color-border-secondary);">
                <img id="insuranceImg" alt="Insurance" style="max-width: 100%; max-height: 100%; object-fit: contain; cursor: pointer;">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer" id="approvalReviewFooter" style="padding: 12px 24px 12px 24px;">
        <button class="btn btn-secondary" onclick="closeApprovalReview()">Cancel</button>
        <button class="btn btn-secondary" onclick="confirmApprovalAction('reject')" style="background: #FF4D4F; color: white; border-color: #FF4D4F;">Reject</button>
        <button class="btn btn-primary" onclick="confirmApprovalAction('approve')">Approve</button>
      </div>
    </div>
  </div>

  <!-- Approve Confirmation Modal -->
  <div class="modal-overlay confirm" id="approveConfirmModal">
    <div class="modal">
      <div class="modal-header" style="border-bottom: none; padding: 24px 24px 16px 24px;">
        <div style="display: flex; align-items: center; gap: 12px;">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="16" cy="16" r="16" fill="#52C41A"/>
            <path d="M22 11L13.5 19.5L10 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <h2 class="modal-title" style="margin: 0;">Confirm Approve</h2>
        </div>
      </div>
      <div class="modal-body" style="padding: 0 24px 24px 24px;">
        <p style="margin: 0; color: var(--fg-primary); font-size: var(--font-body); line-height: 1.6;">
          Are you sure you want to approve this application?
        </p>
      </div>
      <div class="modal-footer" style="border-top: none; padding: 0 24px 24px 24px; justify-content: flex-end;">
        <button class="btn btn-secondary" onclick="closeApproveConfirm()">Cancel</button>
        <button class="btn btn-primary" onclick="executeApprove()">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Reject Confirmation Modal with Reason -->
  <div class="modal-overlay confirm" id="rejectConfirmModal">
    <div class="modal" style="max-width: 500px; width: 500px;">
      <div class="modal-header" style="border-bottom: none; padding: 20px 24px 12px 24px;">
        <div style="display: flex; align-items: center; gap: 12px;">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="16" cy="16" r="16" fill="#FF4D4F"/>
            <path d="M20 12L12 20M12 12L20 20" stroke="white" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <h2 class="modal-title" style="margin: 0;">Confirm Reject</h2>
        </div>
      </div>
      <div class="modal-body" style="padding: 0 24px 20px 24px; display: flex; flex-direction: column;">
        <p style="margin: 0 0 12px 0; color: var(--fg-primary); font-size: var(--font-body); line-height: 1.6;">
          Are you sure you want to reject this application?
        </p>
        <div class="form-group" style="margin-bottom: 0; width: 100%;">
          <label class="form-label required" style="margin-bottom: 8px;">Reject Reason</label>
          <textarea class="form-textarea" id="rejectReasonInput" placeholder="Please enter the reason for rejection (required)" maxlength="500" style="min-height: 100px; width: 100%; resize: vertical;"></textarea>
          <div class="char-count" id="rejectCharCount">0 / 500</div>
        </div>
      </div>
      <div class="modal-footer" style="border-top: none; padding: 0 24px 20px 24px; justify-content: flex-end;">
        <button class="btn btn-secondary" onclick="closeRejectConfirm()">Cancel</button>
        <button class="btn btn-primary" onclick="executeReject()">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Remove Device Confirmation Modal -->
  <div class="modal-overlay confirm" id="removeDeviceModal">
    <div class="modal">
      <div class="modal-header" style="border-bottom: none; padding: 24px 24px 16px 24px;">
        <div style="display: flex; align-items: center; gap: 12px;">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="16" cy="16" r="16" fill="#FFA940"/>
            <text x="16" y="22" text-anchor="middle" fill="white" font-size="20" font-weight="bold" font-family="Arial">!</text>
          </svg>
          <h2 class="modal-title" style="margin: 0;">Confirm Remove</h2>
        </div>
      </div>
      <div class="modal-body" style="padding: 0 24px 24px 24px;">
        <p id="removeDeviceMessage" style="margin: 0; color: var(--fg-primary); font-size: var(--font-body); line-height: 1.6;">
          Are you sure you want to remove device <span id="removeDeviceSN" style="font-weight: var(--font-weight-semibold);"></span> from your company?
        </p>
      </div>
      <div class="modal-footer" style="border-top: none; padding: 0 24px 24px 24px; justify-content: flex-end;">
        <button class="btn btn-secondary" onclick="closeRemoveDeviceModal()">Cancel</button>
        <button class="btn btn-primary" onclick="confirmRemove()">Remove</button>
      </div>
    </div>
  </div>

  <!-- Image Preview Modal -->
  <div class="modal-overlay" id="imagePreviewModal" style="z-index: 2000; background: rgba(0, 0, 0, 0.85); padding: 20px;">
    <div class="modal" style="width: 90%; max-width: 1200px; max-height: 90vh; height: auto; margin: auto; position: relative; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column;">
      <div class="modal-header" style="padding: 12px 20px; flex-shrink: 0;">
        <h2 class="modal-title" id="imagePreviewTitle" style="font-size: 18px;">Image Preview</h2>
        <div style="display: flex; align-items: center; gap: 16px;">
          <div style="display: flex; align-items: center; gap: 8px;">
            <button class="btn btn-secondary" onclick="zoomOut()" style="padding: 6px 12px; min-width: auto;">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
            <span id="zoomLevel" style="min-width: 50px; text-align: center; font-size: 14px; color: var(--fg-secondary);">100%</span>
            <button class="btn btn-secondary" onclick="zoomIn()" style="padding: 6px 12px; min-width: auto;">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
            <button class="btn btn-secondary" onclick="resetZoom()" style="padding: 6px 12px; min-width: auto;">Reset</button>
          </div>
          <span class="modal-close" onclick="closeImagePreview()">×</span>
        </div>
      </div>
      <div class="modal-body" style="padding: 0; background: #1a1a1a; position: relative; overflow: hidden; flex: 1; min-height: 0; aspect-ratio: 16/9; max-height: calc(90vh - 140px);">
        <div id="imageContainer" style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; cursor: grab; position: relative;">
          <img id="imagePreviewImg" src="" alt="" style="max-width: 100%; max-height: 100%; object-fit: contain; user-select: none; pointer-events: none;">
        </div>
      </div>
      <div class="modal-footer" style="padding: 12px 20px; justify-content: space-between; flex-shrink: 0;">
        <div id="imagePreviewFileName" style="color: var(--fg-secondary); font-size: 14px;"></div>
        <button class="btn btn-secondary" onclick="closeImagePreview()">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Toggle sidebar section
    function toggleSection(header) {
      const menu = header.nextElementSibling;
      if (menu && menu.classList.contains('sidebar-menu')) {
        menu.classList.toggle('expanded');
        const arrow = header.querySelector('.dropdown-arrow');
        if (arrow) {
          arrow.style.transform = menu.classList.contains('expanded') ? 'rotate(180deg)' : 'rotate(0deg)';
        }
      }
    }

    // Company operations
    function editCompany(name) {
      document.getElementById('modalTitle').textContent = 'Edit Company';
      document.getElementById('companyName').value = name;
      document.getElementById('companyModal').classList.add('active');
    }

    function deleteCompany(name) {
      // No action for now
    }

    function viewApplication(name) {
      // No action for now
    }

    // Modal operations
    function openCreateModal() {
      document.getElementById('modalTitle').textContent = 'Create Company';
      document.getElementById('companyName').value = '';
      document.getElementById('companyDescription').value = '';
      document.getElementById('businessType').value = 'Others';

      // Reset Business Type custom select
      const businessTypeSelect = document.getElementById('businessTypeSelect');
      const trigger = businessTypeSelect.querySelector('.custom-select-trigger');
      const options = businessTypeSelect.querySelectorAll('.custom-select-option');
      trigger.textContent = 'Others';
      options.forEach(opt => {
        if (opt.getAttribute('data-value') === 'Others') {
          opt.classList.add('selected');
        } else {
          opt.classList.remove('selected');
        }
      });

      updateCharCount();

      // Apply default permissions for Others type
      applyBusinessTypePermissions('Others');

      document.getElementById('companyModal').classList.add('active');
    }

    function closeCompanyModal() {
      document.getElementById('companyModal').classList.remove('active');
    }

    function saveCompany() {
      const name = document.getElementById('companyName').value;
      const businessType = document.getElementById('businessType').value;
      const appPermission = document.getElementById('appPermission').value;
      const dataPermission = document.getElementById('dataPermission').value;

      if (!name.trim()) {
        showToast('Please enter company name', 'error');
        return;
      }
      if (!businessType) {
        showToast('Please select business type', 'error');
        return;
      }
      if (!appPermission) {
        showToast('Please select app permission', 'error');
        return;
      }
      if (!dataPermission) {
        showToast('Please select data permission', 'error');
        return;
      }
      showToast('Company saved successfully', 'success');
      closeCompanyModal();
    }

    // Toast notification function
    function showToast(message, type = 'info') {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toastMessage');
      const toastIconPath = document.getElementById('toastIconPath');

      // Set message
      toastMessage.textContent = message;

      // Set icon based on type
      const icons = {
        success: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z',
        error: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z',
        info: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z'
      };

      toastIconPath.setAttribute('d', icons[type] || icons.info);

      // Remove all type classes and add new one
      toast.classList.remove('success', 'error', 'info');
      toast.classList.add(type);

      // Show toast
      toast.classList.add('show');

      // Hide after 3 seconds
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Tree operations
    function toggleTreeNode(toggleElement) {
      const node = toggleElement.parentElement;
      const children = node.nextElementSibling;
      if (children && children.classList.contains('tree-children')) {
        children.classList.toggle('expanded');
        toggleElement.textContent = children.classList.contains('expanded') ? '▾' : '▸';
      }
    }

    // Update character count
    function updateCharCount() {
      const textarea = document.getElementById('companyDescription');
      const count = document.getElementById('charCount');
      count.textContent = textarea.value.length + ' / 200';
    }

    // Update permission count
    function updatePermissionCount() {
      const checkboxes = document.querySelectorAll('#permissionTree .tree-checkbox:checked');
      const total = document.querySelectorAll('#permissionTree .tree-checkbox').length;
      document.getElementById('permissionCount').textContent = checkboxes.length + ' / ' + total;

      // Update Select All checkbox state
      const selectAllCheckbox = document.getElementById('selectAll');
      const allCheckboxes = document.querySelectorAll('#permissionTree .tree-checkbox');
      const allChecked = Array.from(allCheckboxes).every(cb => cb.checked);
      selectAllCheckbox.checked = allChecked;
    }

    // Handle checkbox change with cascade logic
    function handleCheckboxChange(checkbox) {
      const isChecked = checkbox.checked;
      const treeNode = checkbox.closest('.tree-node');
      const parentTreeItem = treeNode.parentElement;

      // Find immediate children container
      const childrenContainer = parentTreeItem.querySelector(':scope > .tree-children');

      if (isChecked) {
        // When checking: check all descendants
        if (childrenContainer) {
          const childCheckboxes = childrenContainer.querySelectorAll('.tree-checkbox');
          childCheckboxes.forEach(cb => cb.checked = true);
        }

        // Force check all ancestors
        checkAllAncestors(treeNode);
      } else {
        // When unchecking: uncheck all descendants
        if (childrenContainer) {
          const childCheckboxes = childrenContainer.querySelectorAll('.tree-checkbox');
          childCheckboxes.forEach(cb => cb.checked = false);
        }
        // Do NOT affect ancestors when unchecking
      }

      updatePermissionCount();
    }

    // Check all ancestor checkboxes
    function checkAllAncestors(element) {
      let currentElement = element;

      while (currentElement) {
        // Move up to find the parent tree-children
        const parentChildren = currentElement.closest('.tree-children');

        if (!parentChildren) break;

        // Find the parent tree-item that contains this tree-children
        const parentTreeItem = parentChildren.parentElement;

        if (!parentTreeItem || !parentTreeItem.classList.contains('tree-item')) break;

        // Find the checkbox in the parent tree-node
        const parentCheckbox = parentTreeItem.querySelector(':scope > .tree-node > .tree-checkbox');

        if (parentCheckbox) {
          parentCheckbox.checked = true;
        }

        // Move up to continue checking ancestors
        currentElement = parentTreeItem;
      }
    }

    // Select all toggle
    function toggleSelectAll() {
      const selectAll = document.getElementById('selectAll');
      const checkboxes = document.querySelectorAll('#permissionTree .tree-checkbox');
      checkboxes.forEach(cb => cb.checked = selectAll.checked);
      updatePermissionCount();
    }

    // Close modal when clicking outside
    document.getElementById('companyModal')?.addEventListener('click', function(e) {
      if (e.target === this) {
        closeCompanyModal();
      }
    });

    // Apply permissions based on Business Type
    function applyBusinessTypePermissions(businessType) {
      // Helper function to set dropdown value
      function setDropdownValue(selectId, value) {
        const selectElement = document.getElementById(selectId);
        const trigger = selectElement.querySelector('.custom-select-trigger');
        const options = selectElement.querySelectorAll('.custom-select-option');
        const hiddenInput = document.getElementById(selectId.replace('Select', ''));

        trigger.textContent = value;
        if (hiddenInput) hiddenInput.value = value;
        options.forEach(opt => {
          if (opt.getAttribute('data-value') === value) {
            opt.classList.add('selected');
          } else {
            opt.classList.remove('selected');
          }
        });
      }

      // Helper function to check specific permissions
      function checkPermissions(permissionIds) {
        // First uncheck all
        const allCheckboxes = document.querySelectorAll('#permissionTree .tree-checkbox');
        allCheckboxes.forEach(cb => cb.checked = false);

        // Then check specified ones
        permissionIds.forEach(id => {
          const checkbox = document.querySelector(`#permissionTree .tree-checkbox[data-id="${id}"]`);
          if (checkbox) {
            checkbox.checked = true;
            // Also check all ancestors
            checkAllAncestors(checkbox.closest('.tree-node'));
          }
        });

        updatePermissionCount();
      }

      // Apply permissions based on business type
      switch(businessType) {
        case 'Others':
          setDropdownValue('appPermissionSelect', 'Disable');
          setDropdownValue('saasPermissionSelect', 'Disable');
          setDropdownValue('dataPermissionSelect', 'All');
          // Select all web permissions
          document.querySelectorAll('#permissionTree .tree-checkbox').forEach(cb => cb.checked = true);
          document.getElementById('selectAll').checked = true;
          updatePermissionCount();
          break;

        case 'Integrator':
          setDropdownValue('appPermissionSelect', 'Disable');
          setDropdownValue('saasPermissionSelect', 'Disable');
          setDropdownValue('dataPermissionSelect', 'Company-related');
          checkPermissions(['resource', 'resource-eufy', 'resource-charging', 'company-information', 'account', 'account-list', 'account-list-create', 'account-list-edit', 'account-list-delete', 'role', 'role-create', 'role-edit', 'role-delete', 'log', 'login-log', 'operation-log']);
          break;

        case 'Installer':
          setDropdownValue('appPermissionSelect', 'Enable');
          setDropdownValue('saasPermissionSelect', 'Enable');
          setDropdownValue('dataPermissionSelect', 'Company-related');
          checkPermissions(['user', 'user-detail-button', 'user-detail-page', 'device', 'device-user-detail', 'device-remove', 'company-information', 'account', 'account-list', 'account-list-create', 'account-list-edit', 'account-list-delete', 'role', 'role-create', 'role-edit', 'role-delete', 'log', 'login-log', 'operation-log']);
          break;

        case 'Installer (SaaS)':
          setDropdownValue('appPermissionSelect', 'Disable');
          setDropdownValue('saasPermissionSelect', 'Enable');
          setDropdownValue('dataPermissionSelect', 'Company-related');
          checkPermissions(['company-information', 'account', 'account-list', 'account-list-create', 'account-list-edit', 'account-list-delete', 'role', 'role-create', 'role-edit', 'role-delete', 'log', 'login-log', 'operation-log']);
          break;
      }
    }

    // Custom select dropdown functionality
    function initCustomSelect(selectElement) {
      const trigger = selectElement.querySelector('.custom-select-trigger');
      const dropdown = selectElement.querySelector('.custom-select-dropdown');
      const options = selectElement.querySelectorAll('.custom-select-option');
      const hiddenInput = selectElement.nextElementSibling;

      // Toggle dropdown
      trigger.addEventListener('click', (e) => {
        e.stopPropagation();
        // Close all other dropdowns
        document.querySelectorAll('.custom-select.open').forEach(sel => {
          if (sel !== selectElement) {
            sel.classList.remove('open');
            sel.classList.remove('open-upward');
          }
        });
        selectElement.classList.toggle('open');

        // Check if dropdown should open upward
        if (selectElement.classList.contains('open')) {
          const rect = selectElement.getBoundingClientRect();
          const dropdownHeight = 240; // max-height of dropdown
          const spaceBelow = window.innerHeight - rect.bottom;
          const spaceAbove = rect.top;

          // If not enough space below and more space above, open upward
          if (spaceBelow < dropdownHeight && spaceAbove > spaceBelow) {
            selectElement.classList.add('open-upward');
          } else {
            selectElement.classList.remove('open-upward');
          }
        }
      });

      // Select option (skip for multi-select dropdowns)
      if (!selectElement.classList.contains('multi-select')) {
        options.forEach(option => {
          option.addEventListener('click', (e) => {
            e.stopPropagation();
            const value = option.getAttribute('data-value');

            // Update trigger text
            trigger.textContent = value;

            // Update selected state
            options.forEach(opt => opt.classList.remove('selected'));
            option.classList.add('selected');

            // Update hidden input if exists
            if (hiddenInput && hiddenInput.tagName === 'INPUT') {
              hiddenInput.value = value;
            }

            // Close dropdown
            selectElement.classList.remove('open');

            // If this is the Business Type selector, apply permissions
            if (selectElement.id === 'businessTypeSelect') {
              applyBusinessTypePermissions(value);
            }
          });
        });
      }
    }

    // Toggle status option in multi-select dropdown
    function toggleStatusOption(event, status) {
      event.stopPropagation();
      const option = event.currentTarget;
      const checkbox = option.querySelector('input[type="checkbox"]');

      // Toggle checkbox
      checkbox.checked = !checkbox.checked;

      // Update selected state
      if (checkbox.checked) {
        option.classList.add('selected');
      } else {
        option.classList.remove('selected');
      }

      // Update trigger text
      updateStatusTriggerText();

      // Filter approval list
      filterApprovalList();
    }

    // Update status dropdown trigger text
    function updateStatusTriggerText() {
      const selectElement = document.getElementById('statusFilterSelect');
      const trigger = selectElement.querySelector('.custom-select-trigger');
      const checkedOptions = selectElement.querySelectorAll('.custom-select-option input[type="checkbox"]:checked');

      if (checkedOptions.length === 0) {
        trigger.textContent = 'All';
      } else if (checkedOptions.length === 1) {
        trigger.textContent = checkedOptions[0].nextElementSibling.textContent;
      } else if (checkedOptions.length === 3) {
        trigger.textContent = 'All';
      } else {
        const statuses = Array.from(checkedOptions).map(cb => cb.nextElementSibling.textContent);
        trigger.textContent = statuses.join(', ');
      }
    }

    // Toggle business type option
    function toggleBusinessTypeOption(event, businessType) {
      event.stopPropagation();
      const option = event.currentTarget;
      const checkbox = option.querySelector('input[type="checkbox"]');

      // Toggle checkbox
      checkbox.checked = !checkbox.checked;

      // Update selected state
      if (checkbox.checked) {
        option.classList.add('selected');
      } else {
        option.classList.remove('selected');
      }

      // Update trigger text
      updateBusinessTypeTriggerText();

      // Filter approval list
      filterApprovalList();
    }

    // Update business type dropdown trigger text
    function updateBusinessTypeTriggerText() {
      const selectElement = document.getElementById('businessTypeFilterSelect');
      const trigger = selectElement.querySelector('.custom-select-trigger');
      const checkedOptions = selectElement.querySelectorAll('.custom-select-option input[type="checkbox"]:checked');

      if (checkedOptions.length === 0) {
        trigger.textContent = 'All';
      } else if (checkedOptions.length === 1) {
        trigger.textContent = checkedOptions[0].nextElementSibling.textContent;
      } else if (checkedOptions.length === 2) {
        trigger.textContent = 'All';
      } else {
        const types = Array.from(checkedOptions).map(cb => cb.nextElementSibling.textContent);
        trigger.textContent = types.join(', ');
      }
    }

    // Toggle approval search expand/collapse
    function toggleApprovalSearchExpand() {
      const field3 = document.getElementById('approvalField3');
      const field4 = document.getElementById('approvalField4');
      const emptyCell = document.getElementById('approvalEmptyCell');
      const buttonsCollapsed = document.getElementById('approvalButtonsCollapsed');
      const buttonsExpanded = document.getElementById('approvalButtonsExpanded');

      if (field3.style.display === 'none' || field3.style.display === '') {
        // Expand
        field3.style.display = 'flex';
        field4.style.display = 'flex';
        emptyCell.style.display = 'block';
        buttonsCollapsed.style.display = 'none';
        buttonsExpanded.style.display = 'flex';
      } else {
        // Collapse
        field3.style.display = 'none';
        field4.style.display = 'none';
        emptyCell.style.display = 'none';
        buttonsCollapsed.style.display = 'flex';
        buttonsExpanded.style.display = 'none';
      }
    }

    // Toggle user search expand/collapse
    function toggleUserSearchExpand() {
      const field3 = document.getElementById('userField3');
      const emptyCell1 = document.getElementById('userEmptyCell1');
      const emptyCell2 = document.getElementById('userEmptyCell2');
      const buttonsCollapsed = document.getElementById('userButtonsCollapsed');
      const buttonsExpanded = document.getElementById('userButtonsExpanded');

      if (field3.style.display === 'none' || field3.style.display === '') {
        // Expand
        field3.style.display = 'flex';
        emptyCell1.style.display = 'block';
        emptyCell2.style.display = 'block';
        buttonsCollapsed.style.display = 'none';
        buttonsExpanded.style.display = 'flex';
      } else {
        // Collapse
        field3.style.display = 'none';
        emptyCell1.style.display = 'none';
        emptyCell2.style.display = 'none';
        buttonsCollapsed.style.display = 'flex';
        buttonsExpanded.style.display = 'none';
      }
    }

    // Filter approval list based on selected statuses and business types
    function filterApprovalList() {
      // Get selected statuses
      const statusSelect = document.getElementById('statusFilterSelect');
      const checkedStatusOptions = statusSelect.querySelectorAll('.custom-select-option input[type="checkbox"]:checked');
      const selectedStatuses = Array.from(checkedStatusOptions).map(cb => cb.parentElement.getAttribute('data-value'));

      // Get selected business types
      const businessTypeSelect = document.getElementById('businessTypeFilterSelect');
      const checkedBusinessTypeOptions = businessTypeSelect.querySelectorAll('.custom-select-option input[type="checkbox"]:checked');
      const selectedBusinessTypes = Array.from(checkedBusinessTypeOptions).map(cb => cb.parentElement.getAttribute('data-value'));

      const tableBody = document.getElementById('approvalTableBody');
      const rows = tableBody.querySelectorAll('tr');

      let visibleCount = 0;
      rows.forEach(row => {
        const rowStatus = row.getAttribute('data-status');
        const rowBusinessType = row.getAttribute('data-business-type');

        // Check if row matches selected filters (AND logic)
        const statusMatch = selectedStatuses.length === 0 || selectedStatuses.includes(rowStatus);
        const businessTypeMatch = selectedBusinessTypes.length === 0 || selectedBusinessTypes.includes(rowBusinessType);

        if (statusMatch && businessTypeMatch) {
          row.style.display = '';
          visibleCount++;
        } else {
          row.style.display = 'none';
        }
      });

      // Update pagination info
      const paginationInfo = document.querySelector('.pagination-info');
      if (paginationInfo) {
        paginationInfo.textContent = `1-${visibleCount} of ${visibleCount} items`;
      }
    }

    // Global variables - must be defined before use
    let currentApprovalStatus = 'pending';

    const certificateImages = {
      'business-license': {
        src: './images/Business License.webp',
        fileName: 'Business License.webp'
      },
      'sales-license': {
        src: './images/Sales License.jpg',
        fileName: 'Sales License.jpg'
      },
      'insurance': {
        src: './images/Insurance.webp',
        fileName: 'Insurance.webp'
      }
    };

    // Initialize all custom selects
    document.querySelectorAll('.custom-select').forEach(initCustomSelect);

    // Initialize approval list filter (default: Pending only)
    filterApprovalList();

    // Initialize certificate images
    initCertificateImages();

    // Close dropdown when clicking outside
    document.addEventListener('click', () => {
      document.querySelectorAll('.custom-select.open').forEach(sel => {
        sel.classList.remove('open');
        sel.classList.remove('open-upward');
      });
    });

    // Role selector - handle menu and content switching
    const roleSelector = document.getElementById('roleSelector');
    const roleTrigger = roleSelector.querySelector('.custom-select-trigger');
    const roleOptions = roleSelector.querySelectorAll('.custom-select-option');

    roleOptions.forEach(option => {
      option.addEventListener('click', () => {
        const selectedRole = option.getAttribute('data-value');
        switchRole(selectedRole);
      });
    });

    // Switch role function
    function switchRole(role) {
      const adminMenu = document.getElementById('adminMenu');
      const companyMenu = document.getElementById('companyMenu');
      const companyContent = document.getElementById('companyContent');
      const userContent = document.getElementById('userContent');
      const deviceContent = document.getElementById('deviceContent');
      const approvalContent = document.getElementById('approvalContent');

      if (role === 'Administrator') {
        // Show admin menu and company content
        adminMenu.style.display = 'block';
        companyMenu.style.display = 'none';
        companyContent.style.display = 'block';
        userContent.style.display = 'none';
        deviceContent.style.display = 'none';
        approvalContent.style.display = 'none';

        // Reset admin menu active state to Company
        document.querySelectorAll('#adminMenu .sidebar-menu-item').forEach(item => item.classList.remove('active'));
        document.querySelector('#adminMenu .sidebar-menu-item:first-child').classList.add('active');

        // Recheck truncation after page is visible
        setTimeout(checkTextTruncation, 10);
      } else {
        // Company A or Company B - show company menu and user content by default
        adminMenu.style.display = 'none';
        companyMenu.style.display = 'block';
        companyContent.style.display = 'none';
        userContent.style.display = 'block';
        deviceContent.style.display = 'none';
        approvalContent.style.display = 'none';

        // Update company menu active state
        document.querySelectorAll('#companyMenu .sidebar-header').forEach(item => item.classList.remove('active'));
        document.querySelector('#companyMenu .sidebar-header:first-child').classList.add('active');

        // Recheck truncation after page is visible
        setTimeout(checkTextTruncation, 10);
      }
    }

    // Page switching functions
    function showCompanyPage() {
      document.getElementById('companyContent').style.display = 'block';
      document.getElementById('userContent').style.display = 'none';
      document.getElementById('deviceContent').style.display = 'none';
      document.getElementById('approvalContent').style.display = 'none';

      // Update sidebar active state
      document.querySelectorAll('.sidebar-menu-item').forEach(item => item.classList.remove('active'));
      event.target.classList.add('active');

      // Recheck truncation after page is visible
      setTimeout(checkTextTruncation, 10);
    }

    function showUserPage(event) {
      document.getElementById('companyContent').style.display = 'none';
      document.getElementById('userContent').style.display = 'block';
      document.getElementById('deviceContent').style.display = 'none';
      document.getElementById('approvalContent').style.display = 'none';

      // Update company menu active state
      document.querySelectorAll('#companyMenu .sidebar-header').forEach(item => item.classList.remove('active'));
      // Find the closest .sidebar-header element in case user clicks on child element
      const header = event.target.closest('.sidebar-header');
      if (header) {
        header.classList.add('active');
      }

      // Recheck truncation after page is visible
      setTimeout(checkTextTruncation, 10);
    }

    function showDevicePage(event) {
      document.getElementById('companyContent').style.display = 'none';
      document.getElementById('userContent').style.display = 'none';
      document.getElementById('deviceContent').style.display = 'block';
      document.getElementById('approvalContent').style.display = 'none';

      // Update company menu active state
      document.querySelectorAll('#companyMenu .sidebar-header').forEach(item => item.classList.remove('active'));
      // Find the closest .sidebar-header element in case user clicks on child element
      const header = event.target.closest('.sidebar-header');
      if (header) {
        header.classList.add('active');
      }

      // Recheck truncation after page is visible
      setTimeout(checkTextTruncation, 10);
    }

    // Remove device functions
    let deviceToRemove = null;

    function confirmRemoveDevice(deviceSN) {
      deviceToRemove = deviceSN;
      document.getElementById('removeDeviceSN').textContent = deviceSN;
      document.getElementById('removeDeviceModal').classList.add('active');
    }

    function closeRemoveDeviceModal() {
      document.getElementById('removeDeviceModal').classList.remove('active');
      deviceToRemove = null;
    }

    function confirmRemove() {
      if (deviceToRemove) {
        // In a real application, this would make an API call to remove the device
        // For this prototype, we'll just show a success message and optionally remove the row
        showToast('Device removed successfully', 'success');

        // Optional: Remove the row from the table for visual feedback
        const rows = document.querySelectorAll('#deviceContent tbody tr');
        rows.forEach(row => {
          const sn = row.querySelector('td:first-child').textContent;
          if (sn === deviceToRemove) {
            row.remove();
          }
        });

        closeRemoveDeviceModal();
      }
    }

    // ========== Approval Page Functions ==========

    // Show Approval Page
    function showApprovalPage() {
      document.getElementById('companyContent').style.display = 'none';
      document.getElementById('userContent').style.display = 'none';
      document.getElementById('deviceContent').style.display = 'none';
      document.getElementById('approvalContent').style.display = 'block';

      // Update sidebar active state
      document.querySelectorAll('.sidebar-menu-item').forEach(item => item.classList.remove('active'));
      event.target.classList.add('active');

      // Recheck truncation after page is visible
      setTimeout(checkTextTruncation, 10);
    }

    // Open Approval Review Modal
    function openApprovalReview(status, companyName, tenantAccount) {
      currentApprovalStatus = status;
      const modal = document.getElementById('approvalReviewModal');
      const footer = document.getElementById('approvalReviewFooter');
      const resultSection = document.getElementById('approvalResultSection');
      const rejectReasonDiv = document.getElementById('rejectReasonDiv');
      const titleStatus = document.getElementById('approvalTitleStatus');

      // Update basic info
      document.getElementById('reviewCompanyName').textContent = companyName;
      document.getElementById('reviewTenantAccount').textContent = tenantAccount;

      if (status === 'pending') {
        // Pending: Show Approve/Reject buttons, hide approval info
        document.getElementById('approvalReviewTitle').textContent = 'Approval Review';
        titleStatus.innerHTML = '<span style="display: inline-flex; align-items: center; gap: 6px; padding: 4px 12px; background: #E6F7FF; color: #1890FF; border-radius: 4px; font-size: 12px; font-weight: 500;">Pending</span>';
        footer.style.display = 'flex';
        footer.innerHTML = `
          <button class="btn btn-secondary" onclick="closeApprovalReview()">Cancel</button>
          <button class="btn btn-secondary" onclick="confirmApprovalAction('reject')" style="background: #FF4D4F; color: white; border-color: #FF4D4F;">Reject</button>
          <button class="btn btn-primary" onclick="confirmApprovalAction('approve')">Approve</button>
        `;
        resultSection.style.display = 'none';
      } else {
        // Approved/Rejected: Hide footer, show approval info at top
        document.getElementById('approvalReviewTitle').textContent = 'Approval Details';
        footer.style.display = 'none';
        resultSection.style.display = 'block';

        if (status === 'approved') {
          titleStatus.innerHTML = '<span style="display: inline-flex; align-items: center; gap: 6px; padding: 4px 12px; background: #F6FFED; color: #52C41A; border-radius: 4px; font-size: 12px; font-weight: 500;">Approved</span>';
          rejectReasonDiv.style.display = 'none';
        } else {
          titleStatus.innerHTML = '<span style="display: inline-flex; align-items: center; gap: 6px; padding: 4px 12px; background: #FFF1F0; color: #FF4D4F; border-radius: 4px; font-size: 12px; font-weight: 500;">Rejected</span>';
          rejectReasonDiv.style.display = 'block';
          rejectReasonDiv.style.gridColumn = '1 / -1';
        }
      }

      modal.classList.add('active');
    }

    function closeApprovalReview() {
      document.getElementById('approvalReviewModal').classList.remove('active');
    }

    // Confirm Approval Action (Approve/Reject)
    function confirmApprovalAction(action) {
      if (action === 'approve') {
        document.getElementById('approveConfirmModal').classList.add('active');
      } else if (action === 'reject') {
        // Clear previous reject reason
        document.getElementById('rejectReasonInput').value = '';
        document.getElementById('rejectCharCount').textContent = '0 / 500';
        document.getElementById('rejectConfirmModal').classList.add('active');
      }
    }

    // Close Approve Confirm Modal
    function closeApproveConfirm() {
      document.getElementById('approveConfirmModal').classList.remove('active');
    }

    // Close Reject Confirm Modal
    function closeRejectConfirm() {
      document.getElementById('rejectConfirmModal').classList.remove('active');
    }

    // Execute Approve
    function executeApprove() {
      // Close both modals
      closeApproveConfirm();
      closeApprovalReview();

      // Show success message
      showToast('Application approved successfully', 'success');

      // In a real app, would update the list here
      // For demo purposes, just remove the first pending item from the table
      setTimeout(() => {
        const tableBody = document.getElementById('approvalTableBody');
        const firstPendingRow = Array.from(tableBody.querySelectorAll('tr')).find(row =>
          row.getAttribute('data-status') === 'Pending' && row.style.display !== 'none'
        );
        if (firstPendingRow) {
          firstPendingRow.remove();
          // Update pagination info
          filterApprovalList();
        }
      }, 300);
    }

    // Execute Reject
    function executeReject() {
      const reason = document.getElementById('rejectReasonInput').value.trim();

      if (!reason) {
        showToast('Please enter reject reason', 'error');
        return;
      }

      // Close both modals
      closeRejectConfirm();
      closeApprovalReview();

      // Show success message
      showToast('Application rejected successfully', 'success');

      // In a real app, would update the list here
      // For demo purposes, just remove the first pending item from the table
      setTimeout(() => {
        const tableBody = document.getElementById('approvalTableBody');
        const firstPendingRow = Array.from(tableBody.querySelectorAll('tr')).find(row =>
          row.getAttribute('data-status') === 'Pending' && row.style.display !== 'none'
        );
        if (firstPendingRow) {
          firstPendingRow.remove();
          // Update pagination info
          filterApprovalList();
        }
      }, 300);
    }

    // Initialize certificate thumbnail images
    function initCertificateImages() {
      document.getElementById('businessLicenseImg').src = certificateImages['business-license'].src;
      document.getElementById('salesLicenseImg').src = certificateImages['sales-license'].src;
      document.getElementById('insuranceImg').src = certificateImages['insurance'].src;
    }

    // Image zoom and pan state
    let imageZoom = {
      scale: 1,
      translateX: 0,
      translateY: 0,
      isDragging: false,
      startX: 0,
      startY: 0,
      initialized: false
    };

    // Open Image Preview
    function openImagePreview(imageType, imageTitle) {
      const modal = document.getElementById('imagePreviewModal');
      const img = document.getElementById('imagePreviewImg');
      const title = document.getElementById('imagePreviewTitle');
      const fileName = document.getElementById('imagePreviewFileName');

      const certificate = certificateImages[imageType];

      img.src = certificate.src;
      title.textContent = imageTitle;
      fileName.textContent = certificate.fileName;

      // Initialize pan and zoom on first open
      if (!imageZoom.initialized) {
        initImagePanAndZoom();
        imageZoom.initialized = true;
      }

      // Reset zoom state
      resetZoom();

      modal.classList.add('active');
    }

    // Close Image Preview
    function closeImagePreview() {
      document.getElementById('imagePreviewModal').classList.remove('active');
      resetZoom();
    }

    // Zoom In
    function zoomIn() {
      imageZoom.scale = Math.min(imageZoom.scale + 0.25, 5);
      updateImageTransform();
    }

    // Zoom Out
    function zoomOut() {
      imageZoom.scale = Math.max(imageZoom.scale - 0.25, 0.5);
      updateImageTransform();
    }

    // Reset Zoom
    function resetZoom() {
      imageZoom.scale = 1;
      imageZoom.translateX = 0;
      imageZoom.translateY = 0;
      updateImageTransform();
    }

    // Update Image Transform
    function updateImageTransform() {
      const img = document.getElementById('imagePreviewImg');
      const container = document.getElementById('imageContainer');
      const zoomLevel = document.getElementById('zoomLevel');

      if (!img || !container) return;

      img.style.transform = `scale(${imageZoom.scale}) translate(${imageZoom.translateX}px, ${imageZoom.translateY}px)`;

      if (zoomLevel) {
        zoomLevel.textContent = Math.round(imageZoom.scale * 100) + '%';
      }

      // Update cursor based on zoom level
      if (imageZoom.scale > 1) {
        container.style.cursor = imageZoom.isDragging ? 'grabbing' : 'grab';
      } else {
        container.style.cursor = 'default';
      }
    }

    // Initialize Image Container Pan/Drag
    function initImagePanAndZoom() {
      const imageContainer = document.getElementById('imageContainer');
      if (!imageContainer) return;

      imageContainer.addEventListener('mousedown', function(e) {
        if (imageZoom.scale <= 1) return;

        imageZoom.isDragging = true;
        imageZoom.startX = e.clientX - imageZoom.translateX;
        imageZoom.startY = e.clientY - imageZoom.translateY;
        this.style.cursor = 'grabbing';
      });

      imageContainer.addEventListener('mousemove', function(e) {
        if (!imageZoom.isDragging) return;

        imageZoom.translateX = e.clientX - imageZoom.startX;
        imageZoom.translateY = e.clientY - imageZoom.startY;
        updateImageTransform();
      });

      imageContainer.addEventListener('mouseup', function() {
        imageZoom.isDragging = false;
        if (imageZoom.scale > 1) {
          this.style.cursor = 'grab';
        }
      });

      imageContainer.addEventListener('mouseleave', function() {
        imageZoom.isDragging = false;
        if (imageZoom.scale > 1) {
          this.style.cursor = 'grab';
        }
      });

      // Mouse Wheel Zoom
      imageContainer.addEventListener('wheel', function(e) {
        e.preventDefault();

        if (e.deltaY < 0) {
          // Scroll up - zoom in
          imageZoom.scale = Math.min(imageZoom.scale + 0.1, 5);
        } else {
          // Scroll down - zoom out
          imageZoom.scale = Math.max(imageZoom.scale - 0.1, 0.5);
        }

        updateImageTransform();
      }, { passive: false });
    }

    // Update reject reason character count
    document.getElementById('rejectReasonInput')?.addEventListener('input', function() {
      document.getElementById('rejectCharCount').textContent = this.value.length + ' / 500';
    });

    // Close modals when clicking outside
    document.getElementById('approvalReviewModal')?.addEventListener('click', function(e) {
      if (e.target === this) {
        closeApprovalReview();
      }
    });

    document.getElementById('approveConfirmModal')?.addEventListener('click', function(e) {
      if (e.target === this) {
        closeApproveConfirm();
      }
    });

    document.getElementById('rejectConfirmModal')?.addEventListener('click', function(e) {
      if (e.target === this) {
        closeRejectConfirm();
      }
    });

    document.getElementById('imagePreviewModal')?.addEventListener('click', function(e) {
      if (e.target === this) {
        closeImagePreview();
      }
    });

    // Function to check if text is truncated and add title attribute
    function checkTextTruncation() {
      const truncateCells = document.querySelectorAll('td.truncate');

      truncateCells.forEach(cell => {
        // Check if the content is truncated
        if (cell.scrollWidth > cell.clientWidth) {
          // Text is truncated, add title with the full text content
          const textContent = cell.textContent.trim();
          cell.setAttribute('title', textContent);
        } else {
          // Text is not truncated, remove title if exists
          cell.removeAttribute('title');
        }
      });
    }

    // Run on page load
    window.addEventListener('load', checkTextTruncation);

    // Run when window is resized (in case layout changes)
    let resizeTimer;
    window.addEventListener('resize', function() {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(checkTextTruncation, 250);
    });

    console.log('Anker Partner Cloud - Admin Portal');
  </script>
</body>
</html>
